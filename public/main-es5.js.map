{"version":3,"sources":["webpack:///$_lazy_route_resource lazy namespace object","webpack:///src/app/admin/admin.component.ts","webpack:///src/app/admin/admin.component.html","webpack:///src/app/admin/manage-courses/manage-courses.component.ts","webpack:///src/app/admin/manage-courses/manage-courses.component.html","webpack:///src/app/admin/manage-promotion/manage-promotion.component.ts","webpack:///src/app/admin/manage-promotion/manage-promotion.component.html","webpack:///src/app/admin/manage-users/manage-users.component.ts","webpack:///src/app/admin/manage-users/manage-users.component.html","webpack:///src/app/admin/overview/overview.component.ts","webpack:///src/app/admin/overview/overview.component.html","webpack:///src/app/app-routing.module.ts","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/cart/cart.component.html","webpack:///src/app/cart/cart.component.ts","webpack:///src/app/course/course.component.ts","webpack:///src/app/course/course.component.html","webpack:///src/app/courses/courses.component.ts","webpack:///src/app/courses/courses.component.html","webpack:///src/app/guards/user-valid.guard.ts","webpack:///src/app/helper/ls.helper.ts","webpack:///src/app/home/home.component.ts","webpack:///src/app/home/home.component.html","webpack:///src/app/payment/payment.component.ts","webpack:///src/app/payment/payment.component.html","webpack:///src/app/popup/add-promotion-popup/add-promotion-popup.component.ts","webpack:///src/app/popup/add-promotion-popup/add-promotion-popup.component.html","webpack:///src/app/popup/create-course-popup/create-course-popup.component.ts","webpack:///src/app/popup/create-course-popup/create-course-popup.component.html","webpack:///src/app/popup/login-popup/login-popup.component.ts","webpack:///src/app/popup/login-popup/login-popup.component.html","webpack:///src/app/popup/profile-user-popup/profile-user-popup.component.ts","webpack:///src/app/popup/profile-user-popup/profile-user-popup.component.html","webpack:///src/app/popup/register-popup/register-popup.component.ts","webpack:///src/app/popup/register-popup/register-popup.component.html","webpack:///src/app/profile/profile.component.ts","webpack:///src/app/profile/profile.component.html","webpack:///src/environments/environment.ts","webpack:///src/main.ts","webpack:///src/model/cart.ts","webpack:///src/model/lesson.ts","webpack:///src/model/personal-courses.ts","webpack:///src/model/promotion.ts","webpack:///src/model/user.ts","webpack:///src/services/app.service.ts","webpack:///src/services/authen.service.ts"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","AdminComponent","selector","templateUrl","styleUrls","modalRef","ManageCoursesComponent","appService","toastr","modalService","allCourses","loading","getAllCourses","getAllCoursesByAdmin","subscribe","res","err","warning","error","message","modalRefCreateCourse","show","isDelete","courseId","hide","deleteCourseByAdmin","success","initialState","showCreateCoursePopup","ManagePromotionComponent","allPromotions","getAllPromotions","getAllPromotionsByAdmin","modelRefCreatePromotion","content","event","deletePromotionsByAdmin","promotionId","status","i","previousStatus","updateStatusPromotion","$","val","showCreatePromotionPopup","ManageUsersComponent","bsModalService","lsUsers","getAllUsers","userId","OverviewComponent","multi","revenues","view","legend","showLabels","animations","xAxis","yAxis","showYAxisLabel","showXAxisLabel","timeline","xAxisLabel","yAxisLabel","xAxisLabel1","yAxisLabel1","loading1","loading2","Object","assign","data","console","log","JSON","parse","stringify","getRevenueOfYear","totalYear","getTrendTags","routes","path","component","title","runGuardsAndResolvers","canActivate","AppRoutingModule","forRoot","onSameUrlNavigation","imports","AppComponent","router","activatedRoute","titleService","isLogin","courses","events","pipe","child","firstChild","snapshot","setTitle","checkLogin","getAllCategories","modalRefLogin","user","getUserFromStorage","window","location","reload","modalRefRegister","openModalLogin","categories","removeUserStorage","navigate","today","Date","exp","getTime","logoutUser","selectedCourse","item","_id","selectCourse","AppModule","timeOut","declarations","providers","bootstrap","CartComponent","hasCart","CartByUser","paidFor","getCartByUser","paypal","Buttons","createOrder","actions","order","create","purchase_units","description","name","amount","currencyCode","value","usdValue","onApprove","paymentMethod","capture","paidCourses","render","paypalElement","nativeElement","convertCurrency","totalAfterPromoted","getCurrencyConverted","itemCart","deleteItemCart","promotionCode","addPromotionToCart","CourseComponent","sanitizer","maxRating","isReadonlyView","isReadonly","hoverRate","personalCourses","similarCourses","recommendCourses","params","param","getUserById","getCourseById","getCourseByIdNoneUser","course","sortCourses","checkReview","lessons","updateVideoUrl","youtubeCode","reviews","forEach","element","rate","rating","comment","review","addReview","routing","refresh","addCourseToCart","srcYoutube","dangerousVideoUrl","bypassSecurityTrustResourceUrl","filter","purchasedCourseIds","tags","tag","includes","countRecommend","countSimilar","sort","a","b","slice","learnFreeCourse","SortType","CoursesComponent","selectCategory","all","inputString","categoryId","sortType","getAllCoursesByCategoryId","getCategoryById","Rating","config","itemsPerPage","currentPage","totalItems","totalCount","ViewCourses","leftRate","rightTate","Favorite","leftFavorite","rightFavorite","purchasedCount","Free","price","getCoursesByCategoryId","length","categoryName","searchString","searchCategory","push","toLowerCase","String","some","x","numpage","searchCourses","pageChanged","UserValidGuard","route","state","LsHelper","localStorage","setItem","USER_LOCAL","currentUser","getItem","undefined","u1","atob","token","split","removeItem","HomeComponent","topRateCourses","topFavorites","topFreeCourses","getTopRatedCourses","getTopFavorites","getTopFreeCourses","splice","leftFree","rightFree","PaymentComponent","AddPromotionPopupComponent","bsModalRef","newPromotion","isSubmit","start","end","discountPercent","totalAmount","createPromotionsByAdmin","triggerEvent","emit","submit","CreateCoursePopupComponent","authenticateService","fieldTags","fieldLessons","courseTitle","coursePrice","courseDescription","btnSubmit","itemTag","itemLesson","updateCourse","formData","FormData","append","target","files","uploadImage","addTag","addLessons","LoginPopupComponent","isErrorLogin","email","password","login","errorMessage","ProfileUserPopupComponent","lsCourses","getPurchasesCourses","RegisterPopupComponent","isConfirm","username","confirmPassword","registerUser","ProfileComponent","getUserLogin","environment","production","bootstrapModule","Cart","Lesson","PersonalCourses","Promotion","User","AppService","http","apiUrl","httpOptions","headers","Authorization","getToken","get","post","body","fromCurrency","toCurrency","put","reqYear","year","promotion","providedIn","AuthenticateService","saveUserToStorage"],"mappings":"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","file":"main-es5.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-admin',\r\n  templateUrl: './admin.component.html',\r\n  styleUrls: ['./admin.component.scss']\r\n})\r\nexport class AdminComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div style=\"background-color:white;\">\r\n  <tabset>\r\n    <tab heading=\"Home\" id=\"tab1\">\r\n      <app-overview></app-overview>\r\n    </tab>\r\n    <tab heading=\"Manage Courses\">\r\n      <app-manage-courses></app-manage-courses>\r\n    </tab>\r\n    <tab heading=\"Manage Users\">\r\n      <app-manage-users></app-manage-users>\r\n    </tab>\r\n    <tab heading=\"Manage Promotions\">\r\n      <app-manage-promotion></app-manage-promotion>\r\n    </tab>\r\n  </tabset>\r\n</div>\r\n","import { Component, OnInit, TemplateRef } from '@angular/core';\r\nimport { AppService } from '../../../services/app.service';\r\nimport { Course } from '../../../model/course';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { BsModalService, BsModalRef } from 'ngx-bootstrap/modal';\r\nimport { CreateCoursePopupComponent } from '../../popup/create-course-popup/create-course-popup.component';\r\n\r\n@Component({\r\n  selector: 'app-manage-courses',\r\n  templateUrl: './manage-courses.component.html',\r\n  styleUrls: ['./manage-courses.component.scss'],\r\n})\r\nexport class ManageCoursesComponent implements OnInit {\r\n  allCourses: Course[] = [];\r\n  modalRefCreateCourse: BsModalRef;\r\n\r\n  loading = true;\r\n\r\n  modalRef: BsModalRef;\r\n\r\n  constructor(\r\n    private appService: AppService,\r\n    private toastr: ToastrService,\r\n    private modalService: BsModalService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.getAllCourses();\r\n  }\r\n  getAllCourses() {\r\n    this.appService.getAllCoursesByAdmin().subscribe(\r\n      (res: any) => {\r\n        this.loading = false;\r\n        this.allCourses = res;\r\n      },\r\n      (err) => {\r\n        this.toastr.warning(err.error.message);\r\n      }\r\n    );\r\n  }\r\n\r\n  showCreateCoursePopup() {\r\n    this.modalRefCreateCourse = this.modalService.show(\r\n      CreateCoursePopupComponent,\r\n      {\r\n        class: 'gray modal-lg',\r\n      }\r\n    );\r\n    // this.modalRefRegister.content.event.subscribe((res) => {\r\n    //   this.toastr.success('Register successfully!');\r\n    //   this.openModalLogin();\r\n    // });\r\n  }\r\n  openModal(isDelete: TemplateRef<any>) {\r\n    this.modalRef = this.modalService.show(isDelete, { class: 'modal-sm' });\r\n  }\r\n\r\n  deleteCourse(courseId) {\r\n    this.loading = true;\r\n    this.modalRef.hide();\r\n    this.appService.deleteCourseByAdmin(courseId).subscribe(\r\n      (res) => {\r\n        this.toastr.success('Delete successfully!');\r\n        this.getAllCourses();\r\n      },\r\n      (err) => {\r\n        this.toastr.warning(err.error.message);\r\n      }\r\n    );\r\n  }\r\n\r\n  editCourse(courseId){\r\n    const initialState = {\r\n      courseId\r\n    };\r\n    this.modalRefCreateCourse = this.modalService.show(\r\n      CreateCoursePopupComponent,\r\n      {\r\n        class: 'gray modal-lg', initialState\r\n      }\r\n    );\r\n  }\r\n}\r\n","<div class=\"container-fluid mb-4\">\r\n  <div class=\"row my-3 \">\r\n    <h1 class=\"col-12 text-center\">Manage Courses</h1>\r\n  </div>\r\n  <div class=\"row\">\r\n    <div class=\"col-auto ml-auto mt-2\">\r\n      <button class=\"btn btn-add\" (click)=\"showCreateCoursePopup()\"><i class=\"fa fa-plus\" aria-hidden=\"true\"></i> Add Course</button>\r\n    </div>\r\n  </div>\r\n  <hr />\r\n  <div class=\"row\">\r\n    <div class=\"col-12\">\r\n      <div class=\"table-responsive table-hover\">\r\n        <table class=\"table table-striped\">\r\n          <thead class=\"thead-dark\">\r\n            <tr>\r\n              <th scope=\"col\">#</th>\r\n              <th scope=\"col\">By Category</th>\r\n              <th scope=\"col\">Course Name</th>\r\n              <th scope=\"col\">Purchased Count <i class=\"fa fa-sort mx-2\" aria-hidden=\"true\"></i></th>\r\n              <th scope=\"col\">Upload Date <i class=\"fa fa-sort mx-2\" aria-hidden=\"true\"></i></th>\r\n              <th scope=\"col\">Collected (VND) <i class=\"fa fa-sort mx-2\" aria-hidden=\"true\"></i></th>\r\n              <th scope=\"col\">Status</th>\r\n              <th scope=\"col\"></th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr *ngFor=\"let course of allCourses; index as i\" class=\"cursor-pointer\" (dblclick)=\"editCourse(course._id)\">\r\n              <th scope=\"row\">{{i+1}}</th>\r\n              <td>{{course.categoryId}}</td>\r\n              <td>{{course.name}}</td>\r\n              <td>{{course.purchasedCount}} </td>\r\n              <td>{{course.uploadDate | date:'MMM d, y, h:mm:ss a'}} </td>\r\n              <td>{{course.totalCollect}} </td>\r\n              <td>{{course.status}} </td>\r\n              <td>\r\n                <button class=\"btn btn-sm btn-success mx-1\" (click)=\"editCourse(course._id)\">\r\n                  <i class=\"fa fa-pencil\"></i>\r\n                </button>\r\n                <button class=\"btn btn-sm btn-danger mx-1\" (click)=\"openModal(isDelete)\">\r\n                  <i class=\"fa fa-trash\"></i>\r\n                </button>\r\n                <ng-template #isDelete>\r\n                  <div class=\"modal-body text-center\">\r\n                    <p>Are you sure to delete this course?</p>\r\n                    <button type=\"button\" class=\"btn btn-default\" (click)=\"deleteCourse(course._id)\">Yes</button>\r\n                    <button type=\"button\" class=\"btn btn-primary\" (click)=\"modalRef.hide()\">No</button>\r\n                  </div>\r\n                </ng-template>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit, TemplateRef } from '@angular/core';\r\nimport { Promotion } from 'src/model/promotion';\r\nimport { BsModalRef, BsModalService } from 'ngx-bootstrap/modal';\r\nimport { AppService } from 'src/services/app.service';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { AddPromotionPopupComponent } from 'src/app/popup/add-promotion-popup/add-promotion-popup.component';\r\ndeclare var $: any;\r\n\r\n@Component({\r\n  selector: 'app-manage-promotion',\r\n  templateUrl: './manage-promotion.component.html',\r\n  styleUrls: ['./manage-promotion.component.scss'],\r\n})\r\nexport class ManagePromotionComponent implements OnInit {\r\n  allPromotions: Promotion[] = [];\r\n  modelRefCreatePromotion: BsModalRef;\r\n\r\n  loading = true;\r\n\r\n  modalRef: BsModalRef;\r\n\r\n  constructor(\r\n    private appService: AppService,\r\n    private toastr: ToastrService,\r\n    private modalService: BsModalService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.getAllPromotions();\r\n  }\r\n  getAllPromotions() {\r\n    this.appService.getAllPromotionsByAdmin().subscribe(\r\n      (res: any) => {\r\n        this.loading = false;\r\n        this.allPromotions = res;\r\n      },\r\n      (err) => {\r\n        this.toastr.warning(err.error.message);\r\n      }\r\n    );\r\n  }\r\n\r\n  showCreatePromotionPopup() {\r\n    this.modelRefCreatePromotion = this.modalService.show(\r\n      AddPromotionPopupComponent,\r\n      {\r\n        class: 'gray modal-lg',\r\n      }\r\n    );\r\n    this.modelRefCreatePromotion.content.event.subscribe((res) => {\r\n      this.loading = true;\r\n      this.getAllPromotions();\r\n    });\r\n  }\r\n\r\n  openModal(isDelete: TemplateRef<any>) {\r\n    this.modalRef = this.modalService.show(isDelete, { class: 'modal-sm' });\r\n  }\r\n\r\n  deletePromotion(code) {\r\n    this.modalRef.hide();\r\n    this.appService.deletePromotionsByAdmin(code).subscribe(\r\n      (res: any) => {\r\n        this.toastr.success('Deleted successfully');\r\n        this.loading = true;\r\n        this.getAllPromotions();\r\n      },\r\n      (err) => {\r\n        this.toastr.warning(err.error.message);\r\n      }\r\n    );\r\n  }\r\n\r\n  editPromotion(promotionId) {\r\n    //   const initialState = {\r\n    //     courseId\r\n    //   };\r\n    //   this.modalRefCreateCourse = this.modalService.show(\r\n    //     CreateCoursePopupComponent,\r\n    //     {\r\n    //       class: 'gray modal-lg', initialState\r\n    //     }\r\n    //   );\r\n  }\r\n\r\n  onChange(code,status,i, previousStatus) {\r\n    this.appService.updateStatusPromotion(code,status).subscribe(\r\n      (res: any) => {\r\n        this.toastr.success('Updated successfully');\r\n      },\r\n      (err) => {\r\n        this.toastr.warning(err.error.message);\r\n        $('#status_'+i).val(previousStatus);\r\n      }\r\n    );\r\n  }\r\n}\r\n","<div class=\"container-fluid mb-4\">\r\n  <div class=\"row my-3\">\r\n    <h1 class=\"col-12 text-center\">Manage Promotions</h1>\r\n  </div>\r\n  <div class=\"row\">\r\n    <div class=\"col-auto ml-auto mt-2\">\r\n      <button class=\"btn btn-add\" (click)=\"showCreatePromotionPopup()\">\r\n        <i class=\"fa fa-plus\" aria-hidden=\"true\"></i> Add Promotion\r\n      </button>\r\n    </div>\r\n  </div>\r\n  <hr />\r\n  <div class=\"row\">\r\n    <div class=\"col-12\">\r\n      <div class=\"table-responsive table-hover\">\r\n        <table class=\"table table-striped\">\r\n          <thead class=\"thead-dark\">\r\n            <tr>\r\n              <th scope=\"col\">#</th>\r\n              <th scope=\"col\">Code</th>\r\n              <th scope=\"col\">\r\n                Start date <i class=\"fa fa-sort mx-2\" aria-hidden=\"true\"></i>\r\n              </th>\r\n              <th scope=\"col\">\r\n                End date <i class=\"fa fa-sort mx-2\" aria-hidden=\"true\"></i>\r\n              </th>\r\n              <th scope=\"col\">\r\n                Discount(%) <i class=\"fa fa-sort mx-2\" aria-hidden=\"true\"></i>\r\n              </th>\r\n              <th scope=\"col\">\r\n                Total times <i class=\"fa fa-sort mx-2\" aria-hidden=\"true\"></i>\r\n              </th>\r\n              <th scope=\"col\">\r\n                Used count <i class=\"fa fa-sort mx-2\" aria-hidden=\"true\"></i>\r\n              </th>\r\n              <th scope=\"col\">\r\n                User class <i class=\"fa fa-sort mx-2\" aria-hidden=\"true\"></i>\r\n              </th>\r\n              <th scope=\"col\">\r\n                Status <i class=\"fa fa-sort mx-2\" aria-hidden=\"true\"></i>\r\n              </th>\r\n              <th scope=\"col\"></th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr\r\n              *ngFor=\"let promotion of allPromotions; index as i\"\r\n              class=\"cursor-pointer\"\r\n            >\r\n              <th scope=\"row\">{{ i + 1 }}</th>\r\n              <td>{{ promotion.code }}</td>\r\n              <td>{{ promotion.start | date: \"MMM d, y, h:mm:ss a\" }}</td>\r\n              <td>{{ promotion.end | date: \"MMM d, y, h:mm:ss a\" }}</td>\r\n              <td>{{ promotion.discountPercent }}</td>\r\n              <td>{{ promotion.totalAmount }}</td>\r\n              <td>{{ promotion.usedCount }}</td>\r\n              <td>{{ promotion.userClass }}</td>\r\n              <!-- <td>{{promotion.status}} </td> -->\r\n              <td>\r\n                <select\r\n                  style=\"width: 130px;\"\r\n                  [ngModel]=\"promotion.status\"\r\n                  class=\"form-control col\"\r\n                  (change)=\"onChange(promotion.code, $event.target.value,i,promotion.status)\"\r\n                  id=\"status_{{i}}\"\r\n                >\r\n                  <option value=\"available\">Available</option>\r\n                  <option  value=\"pending\">Pending</option>\r\n                  <option  value=\"dropped\">Dropped</option>\r\n                </select>\r\n              </td>\r\n              <td>\r\n                <button\r\n                  class=\"btn btn-sm btn-danger\"\r\n                  (click)=\"openModal(isDelete)\"\r\n                >\r\n                  <i class=\"fa fa-trash\"></i>\r\n                </button>\r\n                <ng-template #isDelete>\r\n                  <div class=\"modal-body text-center\">\r\n                    <p>Are you sure to delete this promotion?</p>\r\n                    <button\r\n                      type=\"button\"\r\n                      class=\"btn btn-default\"\r\n                      (click)=\"deletePromotion(promotion.code)\"\r\n                    >\r\n                      Yes\r\n                    </button>\r\n                    <button\r\n                      type=\"button\"\r\n                      class=\"btn btn-primary\"\r\n                      (click)=\"modalRef.hide()\"\r\n                    >\r\n                      No\r\n                    </button>\r\n                  </div>\r\n                </ng-template>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { AppService } from 'src/services/app.service';\r\nimport { User } from 'src/model/user';\r\nimport { BsModalRef, BsModalService } from 'ngx-bootstrap/modal';\r\nimport { ProfileUserPopupComponent } from 'src/app/popup/profile-user-popup/profile-user-popup.component';\r\n\r\n@Component({\r\n  selector: 'app-manage-users',\r\n  templateUrl: './manage-users.component.html',\r\n  styleUrls: ['./manage-users.component.scss'],\r\n})\r\nexport class ManageUsersComponent implements OnInit {\r\n  lsUsers: User[] = [];\r\n  modalRef: BsModalRef;\r\n\r\n  constructor(private appService: AppService, private bsModalService: BsModalService) {}\r\n\r\n\r\n  ngOnInit(): void {\r\n    this.appService.getAllUsers().subscribe(\r\n      (res) => {\r\n        this.lsUsers = res;\r\n      },\r\n      (err) => {}\r\n    );\r\n  }\r\n\r\n  doubleClick(userId){\r\n    const initialState = {\r\n      userId: userId\r\n    }\r\n    this.modalRef = this.bsModalService.show(ProfileUserPopupComponent, { class: 'modal-xl',initialState });\r\n\r\n  }\r\n}\r\n","<div class=\"container-fluid mb-4\">\r\n    <div class=\"row my-3 \">\r\n      <h1 class=\"col-12 text-center\">Manage User</h1>\r\n    </div>\r\n    <hr />\r\n    <div class=\"row\">\r\n      <div class=\"col-12\">\r\n        <div class=\"table-responsive table-hover\">\r\n          <table class=\"table table-striped\">\r\n            <thead class=\"thead-dark\">\r\n              <tr>\r\n                <th scope=\"col\">#</th>\r\n                <th scope=\"col\">Email</th>\r\n                <th scope=\"col\">Fullname</th>\r\n                <th scope=\"col\">Purchased Count <i class=\"fa fa-sort mx-2\" aria-hidden=\"true\"></i></th>\r\n                <th scope=\"col\">Total Spent (VND) <i class=\"fa fa-sort mx-2\" aria-hidden=\"true\"></i></th>\r\n                <th scope=\"col\">Role</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr *ngFor=\"let user of lsUsers; index as i\" style=\"cursor: pointer;\" (dblclick)=\"doubleClick(user._id)\">\r\n                <th scope=\"row\">{{i+1}}</th>\r\n                <td>{{user.email}}</td>\r\n                <td>{{user.name}}</td>\r\n                <td >{{user.purchasedCourseIds.length}} </td>\r\n                <td>{{user.totalSpend}} </td>\r\n                <td *ngIf=\"user.isAdmin\">Admin</td>\r\n                <td *ngIf=\"!user.isAdmin\">User</td>\r\n                \r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  ","import { Component, OnInit } from '@angular/core';\r\nimport { AppService } from 'src/services/app.service';\r\n\r\n@Component({\r\n  selector: 'app-overview',\r\n  templateUrl: './overview.component.html',\r\n  styleUrls: ['./overview.component.scss'],\r\n})\r\nexport class OverviewComponent implements OnInit {\r\n  multi: any[] = [];\r\n\r\n  revenues: any[] = [];\r\n  totalYear: number;\r\n\r\n  view: any[] = [1000, 400];\r\n\r\n  // options\r\n  legend = true;\r\n  showLabels = true;\r\n  animations = true;\r\n  xAxis = true;\r\n  yAxis = true;\r\n  showYAxisLabel = true;\r\n  showXAxisLabel = true;\r\n  timeline = true;\r\n  xAxisLabel = 'Month';\r\n  yAxisLabel = 'Count';\r\n  xAxisLabel1 = 'Month';\r\n  yAxisLabel1 = 'VND';\r\n\r\n  loading1 = true;\r\n  loading2 = true;\r\n  constructor(private appService: AppService) {\r\n    Object.assign(this, this.multi);\r\n  }\r\n\r\n  onSelect(data): void {\r\n    console.log('Item clicked', JSON.parse(JSON.stringify(data)));\r\n  }\r\n\r\n  onActivate(data): void {\r\n    console.log('Activate', JSON.parse(JSON.stringify(data)));\r\n  }\r\n\r\n  onDeactivate(data): void {\r\n    console.log('Deactivate', JSON.parse(JSON.stringify(data)));\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.appService.getRevenueOfYear(2020).subscribe(\r\n      (res) => {\r\n        this.revenues = res.revenues;\r\n        this.totalYear = res.totalYear;\r\n        this.loading1 = false;\r\n      },\r\n      (err) => console.log(err)\r\n    );\r\n    this.appService.getTrendTags(2020).subscribe(\r\n      (res) => {\r\n        this.multi = res;\r\n        this.loading2 = false;\r\n      },\r\n      (err) => console.log(err)\r\n    );\r\n  }\r\n}\r\n","<div class=\"container-fluid\">\r\n  <div class=\"row\">\r\n    <div class=\"col-auto h1 font-weight-bold m-2 mb-4 mx-auto\">\r\n      Overview about ITCOURSESEC\r\n    </div>\r\n  </div>\r\n  <div class=\"row w-100\" *ngIf=\"loading1 && loading2\">\r\n    <div class=\"lds-roller col-auto mx-auto\">\r\n      <div></div>\r\n      <div></div>\r\n      <div></div>\r\n      <div></div>\r\n      <div></div>\r\n      <div></div>\r\n      <div></div>\r\n      <div></div>\r\n    </div>\r\n  </div>\r\n  <div *ngIf=\"!loading1 && !loading2\">\r\n    <div class=\"row\">\r\n      <div class=\"col-auto mx-auto\">\r\n        <ngx-charts-line-chart\r\n          [view]=\"view\"\r\n          [legend]=\"legend\"\r\n          [showXAxisLabel]=\"showXAxisLabel\"\r\n          [showYAxisLabel]=\"showYAxisLabel\"\r\n          [xAxis]=\"xAxis\"\r\n          [yAxis]=\"yAxis\"\r\n          [timeline]=\"timeline\"\r\n          [results]=\"multi\"\r\n          (select)=\"onSelect($event)\"\r\n          (activate)=\"onActivate($event)\"\r\n          (deactivate)=\"onDeactivate($event)\"\r\n          [xAxisLabel]=\"xAxisLabel\"\r\n          [yAxisLabel]=\"yAxisLabel\"\r\n        >\r\n        </ngx-charts-line-chart>\r\n      </div>\r\n    </div>\r\n    <div class=\"row title\">\r\n      <div class=\"col-auto mx-auto text-muted font-italic\">Trending 2020</div>\r\n    </div>\r\n    <hr />\r\n    <div class=\"row\">\r\n      <div class=\"col-auto mx-auto\">\r\n        <ngx-charts-bar-vertical\r\n          [legend]=\"legend\"\r\n          [view]=\"view\"\r\n          [results]=\"revenues\"\r\n          [xAxis]=\"xAxis\"\r\n          [yAxis]=\"yAxis\"\r\n          [showXAxisLabel]=\"showXAxisLabel\"\r\n          [showYAxisLabel]=\"showYAxisLabel\"\r\n          [roundEdges]=\"false\"\r\n          [xAxisLabel]=\"xAxisLabel1\"\r\n          [yAxisLabel]=\"yAxisLabel1\"\r\n        >\r\n        </ngx-charts-bar-vertical>\r\n      </div>\r\n    </div>\r\n    <div class=\"row\">\r\n      <div class=\"col-auto mx-auto mb-5 text-muted font-italic\">\r\n        Revenues of 2020\r\n      </div>\r\n    </div>\r\n    <div class=\"row\">\r\n      <div class=\"col-auto mx-auto mb-5 text-muted font-italic\">\r\n        Total amount of 2020: {{ totalYear }}\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { CoursesComponent } from './courses/courses.component';\r\nimport { HomeComponent } from './home/home.component';\r\nimport { CourseComponent } from './course/course.component';\r\nimport { ProfileComponent } from './profile/profile.component';\r\nimport { UserValidGuard } from './guards/user-valid.guard';\r\nimport { CartComponent } from './cart/cart.component';\r\nimport { AdminComponent } from './admin/admin.component';\r\n\r\nconst routes: Routes = [\r\n  { path: '', component: HomeComponent },\r\n  { path: 'courses', component: CoursesComponent, data: { title: 'Courses'} },\r\n  { path: 'courses/cat/:categoryId', component: CoursesComponent, data: { title: 'Courses'}},\r\n  { path: 'courses/sort/:sortType', component: CoursesComponent, data: { title: 'Courses'}},\r\n  {\r\n    path: 'course/:id',\r\n    component: CourseComponent,\r\n    runGuardsAndResolvers: 'always',\r\n    data: { title: 'Course'}\r\n  },\r\n  {\r\n    path: 'profile',\r\n    component: ProfileComponent,\r\n    canActivate: [UserValidGuard],\r\n    data: { title: 'Profile'}\r\n  },\r\n  // { path: 'create-course', component: CreateCourseComponent },\r\n  { path: 'cart', component: CartComponent, canActivate: [UserValidGuard], data: { title: 'Cart'} },\r\n  { path: 'admin', component: AdminComponent, data: { title: 'Admin'} },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forRoot(routes, { onSameUrlNavigation: 'reload' })],\r\n  exports: [RouterModule],\r\n})\r\nexport class AppRoutingModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { BsModalService, BsModalRef } from 'ngx-bootstrap/modal';\r\nimport { LoginPopupComponent } from './popup/login-popup/login-popup.component';\r\nimport { RegisterPopupComponent } from './popup/register-popup/register-popup.component';\r\nimport { AppService } from '../services/app.service';\r\nimport { User } from '../model/user';\r\nimport { LsHelper } from './helper/ls.helper';\r\nimport { Course } from '../model/course';\r\nimport { TypeaheadMatch } from 'ngx-bootstrap/typeahead';\r\nimport { Router, ActivatedRoute, NavigationEnd } from '@angular/router';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { Title } from '@angular/platform-browser';\r\nimport { filter, map } from 'rxjs/operators';\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss'],\r\n})\r\nexport class AppComponent implements OnInit {\r\n  title = 'FrontEnd';\r\n  modalRefLogin: BsModalRef;\r\n  modalRefRegister: BsModalRef;\r\n  categories: any;\r\n  user: User;\r\n  isLogin = false;\r\n\r\n  courses: Course[] = [];\r\n  course: string;\r\n  selectedCourse: Course;\r\n\r\n  constructor(\r\n    private modalService: BsModalService,\r\n    private appService: AppService,\r\n    private router: Router,\r\n    private activatedRoute: ActivatedRoute,\r\n    private toastr: ToastrService,\r\n    private titleService: Title\r\n  ) {\r\n    this.router.events.pipe(\r\n      filter(event => event instanceof NavigationEnd),\r\n      map(() => {\r\n        let child = this.activatedRoute.firstChild;\r\n        while (child) {\r\n          if (child.firstChild) {\r\n            child = child.firstChild;\r\n          } else if (child.snapshot.data && child.snapshot.data['title']) {\r\n            return child.snapshot.data['title'];\r\n          } else {\r\n            return null;\r\n          }\r\n        }\r\n        return null;\r\n      })\r\n    ).subscribe((data: any) => {\r\n      if (data) {\r\n        this.titleService.setTitle(data + ' - ITCOURSESEC');\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.checkLogin();\r\n    this.getAllCategories();\r\n    this.getAllCourses();\r\n  }\r\n  openModalLogin() {\r\n    this.modalRefLogin = this.modalService.show(LoginPopupComponent, {\r\n      class: 'gray modal-md',\r\n    });\r\n    this.modalRefLogin.content.event.subscribe((res) => {\r\n      this.isLogin = true;\r\n      this.user = LsHelper.getUserFromStorage();\r\n      window.location.reload();\r\n    });\r\n  }\r\n\r\n  openModalRegister() {\r\n    this.modalRefRegister = this.modalService.show(RegisterPopupComponent, {\r\n      class: 'gray modal-md',\r\n    });\r\n    this.modalRefRegister.content.event.subscribe((res) => {\r\n      this.toastr.success('Register successfully!');\r\n      this.openModalLogin();\r\n    });\r\n  }\r\n\r\n  getAllCategories() {\r\n    this.appService.getAllCategories().subscribe(\r\n      (res: any) => {\r\n        this.categories = res;\r\n      },\r\n      (err) => console.log(err)\r\n    );\r\n  }\r\n\r\n  logoutUser() {\r\n    LsHelper.removeUserStorage();\r\n    this.isLogin = false;\r\n    this.user = null;\r\n    this.router.navigate(['']);\r\n  }\r\n\r\n  checkLogin() {\r\n    this.user = LsHelper.getUserFromStorage();\r\n    if (!this.user) {\r\n      this.isLogin = false;\r\n      return;\r\n    }\r\n    const today = new Date();\r\n    const exp = today.getTime() / 1000;\r\n    if (exp > this.user.exp) {\r\n      this.logoutUser();\r\n    }\r\n  }\r\n\r\n  getAllCourses() {\r\n    this.appService.getAllCourses().subscribe((res: any) => {\r\n      this.courses = res;\r\n    });\r\n  }\r\n\r\n  selectCourse(event: TypeaheadMatch) {\r\n    this.selectedCourse = event.item;\r\n    console.log(this.selectedCourse);\r\n    this.router.navigate(['/course', this.selectedCourse._id]);\r\n  }\r\n}\r\n","<nav\r\n  class=\"navbar navbar-expand-lg navbar-custom top-menu\"\r\n  style=\"\r\n    background-color: rgb(38, 56, 50);\r\n    border-bottom: 1px solid white;\r\n    height: 70px;\r\n    opacity: 1;\r\n    background-image: radial-gradient(\r\n      circle at 65% 50%,\r\n      rgba(216, 89, 195, 0),\r\n      rgba(216, 89, 195, 0) 37%,\r\n      #d42768 72%\r\n    );\r\n  \"\r\n>\r\n  <a class=\"navbar-brand\" href>\r\n    <img\r\n      src=\"../assets/img/logo2.png\"\r\n      class=\"navbar-logo-img mr-2\"\r\n      style=\"width: 250px; height: 65px; padding-bottom: 5px;\"\r\n      alt=\"\"\r\n    />\r\n  </a>\r\n\r\n  <!-- <button\r\n    class=\"navbar-toggler\"\r\n    type=\"button\"\r\n    data-toggle=\"collapse\"\r\n    data-target=\"#navbarSupportedContent\"\r\n    aria-controls=\"navbarSupportedContent\"\r\n    aria-expanded=\"false\"\r\n    aria-label=\"Toggle navigation\"\r\n  >\r\n    <span class=\"navbar-toggler-icon\"></span>\r\n  </button> -->\r\n\r\n  <div class=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\r\n    <ul class=\"navbar-nav ml-auto\">\r\n      <li class=\"nav-item mr-3\" *ngIf=\"user && user.isAdmin\">\r\n        <a class=\"nav-link hover-color\" href=\"/admin\"\r\n          >Admin <span class=\"sr-only\">(current)</span></a\r\n        >\r\n      </li>\r\n      <li class=\"nav-item\">\r\n        <div class=\"btn-group col-auto\">\r\n          <button\r\n            class=\"btn category dropdown-toggle hover-color\"\r\n            type=\"button\"\r\n            data-toggle=\"dropdown\"\r\n          >\r\n            Category\r\n          </button>\r\n          <div class=\"dropdown-menu\" style=\"margin-top: 10px;\">\r\n            <a\r\n              class=\"dropdown-item hover-color\"\r\n              href=\"/courses/cat/{{ item._id }}\"\r\n              *ngFor=\"let item of categories\"\r\n              >{{ item.name }}</a\r\n            >\r\n          </div>\r\n        </div>\r\n      </li>\r\n      <li class=\"nav-item mr-3\">\r\n        <a class=\"nav-link hover-color\" href=\"/courses\"\r\n          >Courses <span class=\"sr-only\">(current)</span></a\r\n        >\r\n      </li>\r\n      <form class=\"form-inline my-2 my-lg-0\">\r\n        <input\r\n          [typeahead]=\"courses\"\r\n          [(ngModel)]=\"course\"\r\n          name=\"course\"\r\n          class=\"form-control mr-sm-2\"\r\n          typeaheadOptionField=\"name\"\r\n          type=\"text\"\r\n          placeholder=\"Search\"\r\n          aria-label=\"Search\"\r\n          (typeaheadOnSelect)=\"selectCourse($event)\"\r\n        />\r\n        <i class=\"fa fa-search btn-search\" aria-hidden=\"true\"></i>\r\n      </form>\r\n      <li class=\"nav-item px-1\" *ngIf=\"user\">\r\n        <div class=\"btn-group col-auto\">\r\n          <button class=\"btn\" type=\"button\" data-toggle=\"dropdown\">\r\n            <img\r\n              style=\"width: 30px; border-radius: 100%; text-align: center;\"\r\n              src=\"http://i.pravatar.cc/500\"\r\n              alt=\"Recipe author avatar\"\r\n            />\r\n          </button>\r\n          <div class=\"dropdown-menu\" style=\"margin-top: 12px; width: 180px\">\r\n            <span class=\"dropdown-item\">{{ user.name }}</span>\r\n            <hr />\r\n            <span style=\"cursor: pointer;\"\r\n              class=\"dropdown-item hover-color font-weight-bold\"\r\n              routerLink=\"/profile\"\r\n              >Profile</span\r\n            >\r\n            <span style=\"cursor: pointer;\"\r\n              class=\"dropdown-item hover-color font-weight-bold\"\r\n              (click)=\"logoutUser()\"\r\n              >Logout</span\r\n            >\r\n          </div>\r\n        </div>\r\n      </li>\r\n      <li class=\"nav-item px-1\" *ngIf=\"user\" routerLink=\"/cart\">\r\n        <div class=\"nav-link create-recipe-link cursor-pointer hover-color\">\r\n          <i class=\"fa fa-shopping-cart\" aria-hidden=\"true\"></i>\r\n          Cart\r\n        </div>\r\n      </li>\r\n      <li class=\"nav-item px-2\" *ngIf=\"!user\">\r\n        <div\r\n          class=\"nav-link create-recipe-link cursor-pointer hover-color\"\r\n          (click)=\"openModalLogin()\"\r\n        >\r\n          Login\r\n        </div>\r\n      </li>\r\n      <li class=\"nav-item px-2\" *ngIf=\"!user\">\r\n        <div\r\n          class=\"nav-link create-recipe-link cursor-pointer hover-color\"\r\n          (click)=\"openModalRegister()\"\r\n        >\r\n          Register\r\n        </div>\r\n      </li>\r\n     \r\n    </ul>\r\n  </div>\r\n</nav>\r\n<div style=\"width: 100%; height: 70px;\"></div>\r\n<router-outlet></router-outlet>\r\n","import { BrowserModule } from '@angular/platform-browser';\r\nimport { NgModule } from '@angular/core';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\nimport { AppRoutingModule } from './app-routing.module';\r\nimport { AppComponent } from './app.component';\r\nimport { HomeComponent } from './home/home.component';\r\nimport { CoursesComponent } from './courses/courses.component';\r\nimport { CourseComponent } from './course/course.component';\r\nimport { LoginPopupComponent } from './popup/login-popup/login-popup.component';\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { ModalModule } from 'ngx-bootstrap/modal';\r\nimport { RegisterPopupComponent } from './popup/register-popup/register-popup.component';\r\nimport { ProfileComponent } from './profile/profile.component';\r\nimport { AdminComponent } from './admin/admin.component';\r\nimport { AppService } from '../services/app.service';\r\nimport { PaymentComponent } from './payment/payment.component';\r\nimport { AuthenticateService } from '../services/authen.service';\r\nimport { DatePipe } from '@angular/common';\r\nimport { CommonModule } from '@angular/common';\r\nimport { TypeaheadModule } from 'ngx-bootstrap/typeahead';\r\nimport { RatingModule } from 'ngx-bootstrap/rating';\r\nimport { ToastrModule } from 'ngx-toastr';\r\nimport { UserValidGuard } from './guards/user-valid.guard';\r\nimport { BsDropdownModule } from 'ngx-bootstrap/dropdown';\r\nimport { CartComponent } from './cart/cart.component';\r\nimport { TabsModule } from 'ngx-bootstrap/tabs';\r\nimport { ManageCoursesComponent } from './admin/manage-courses/manage-courses.component';\r\nimport { ManageUsersComponent } from './admin/manage-users/manage-users.component';\r\nimport { CreateCoursePopupComponent } from './popup/create-course-popup/create-course-popup.component';\r\nimport { NgxPaginationModule } from 'ngx-pagination';\r\nimport { OverviewComponent } from './admin/overview/overview.component';\r\nimport { NgxChartsModule } from '@swimlane/ngx-charts';\r\nimport { ManagePromotionComponent } from './admin/manage-promotion/manage-promotion.component';\r\nimport { ProfileUserPopupComponent } from './popup/profile-user-popup/profile-user-popup.component';\r\nimport { AddPromotionPopupComponent } from './popup/add-promotion-popup/add-promotion-popup.component';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    HomeComponent,\r\n    CoursesComponent,\r\n    CourseComponent,\r\n    LoginPopupComponent,\r\n    RegisterPopupComponent,\r\n    ProfileComponent,\r\n    AdminComponent,\r\n    PaymentComponent,\r\n    CartComponent,\r\n    ManageCoursesComponent,\r\n    ManageUsersComponent,\r\n    CreateCoursePopupComponent,\r\n    OverviewComponent,\r\n    ManagePromotionComponent,\r\n    ProfileUserPopupComponent,\r\n    AddPromotionPopupComponent,\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    BrowserAnimationsModule,\r\n    AppRoutingModule,\r\n    HttpClientModule,\r\n    FormsModule,\r\n    CommonModule,\r\n    ToastrModule.forRoot({\r\n      timeOut: 3000,\r\n    }),\r\n    ModalModule.forRoot(),\r\n    TypeaheadModule.forRoot(),\r\n    RatingModule.forRoot(),\r\n    BsDropdownModule.forRoot(),\r\n    TabsModule.forRoot(),\r\n    NgxPaginationModule,\r\n    NgxChartsModule,\r\n  ],\r\n  providers: [AppService, AuthenticateService, DatePipe, UserValidGuard],\r\n  bootstrap: [AppComponent],\r\n})\r\nexport class AppModule {}\r\n","<div class=\"container mb-4\">\r\n  <div class=\"row my-3\">\r\n    <h1 class=\"col-12 text-center\">YOUR CURRENT CART</h1>\r\n  </div>\r\n  <hr />\r\n  <div class=\"row w-100\" *ngIf=\"loading\">\r\n    <div class=\"lds-roller col-auto mx-auto\">\r\n      <div></div>\r\n      <div></div>\r\n      <div></div>\r\n      <div></div>\r\n      <div></div>\r\n      <div></div>\r\n      <div></div>\r\n      <div></div>\r\n    </div>\r\n  </div>\r\n  <div *ngIf=\"!paidFor && !loading\" class=\"row\">\r\n    <div class=\"col-12\">\r\n      <div class=\"table-responsive table-hover\">\r\n        <table class=\"table table-striped\">\r\n          <thead class=\"thead-dark\">\r\n            <tr>\r\n              <th scope=\"col\"></th>\r\n              <th scope=\"col\">Product</th>\r\n              <th scope=\"col\">Available</th>\r\n              <th scope=\"col\" class=\"text-right\">Price</th>\r\n              <th></th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr *ngFor=\"let item of CartByUser.items\">\r\n              <td><img src=\"https://dummyimage.com/50x50/55595c/fff\" /></td>\r\n              <td>{{ item.courseName }}</td>\r\n              <td>In stock</td>\r\n              <td class=\"text-right\">{{ item.coursePrice }} VND</td>\r\n              <td class=\"text-right\">\r\n                <button\r\n                  class=\"btn btn-sm btn-danger\"\r\n                  (click)=\"openModal(isDelete)\"\r\n                >\r\n                  <i class=\"fa fa-trash\"></i>\r\n                </button>\r\n                <ng-template #isDelete>\r\n                  <div class=\"modal-body text-center\">\r\n                    <p>Are you sure to delete this course?</p>\r\n                    <button\r\n                      type=\"button\"\r\n                      class=\"btn btn-default\"\r\n                      (click)=\"deleteCartItem(item)\"\r\n                    >\r\n                      Yes\r\n                    </button>\r\n                    <button\r\n                      type=\"button\"\r\n                      class=\"btn btn-primary\"\r\n                      (click)=\"modalRef.hide()\"\r\n                    >\r\n                      No\r\n                    </button>\r\n                  </div>\r\n                </ng-template>\r\n              </td>\r\n            </tr>\r\n\r\n            <tr>\r\n              <td></td>\r\n              <td></td>\r\n              <td></td>\r\n              <td><strong>Total</strong></td>\r\n              <td class=\"text-right\">\r\n                <strong>{{ CartByUser.total }} VND</strong>\r\n              </td>\r\n            </tr>\r\n\r\n            <tr>\r\n              <td></td>\r\n              <td></td>\r\n              <td></td>\r\n              <td><strong>Total after promoted</strong></td>\r\n              <td class=\"text-right\">\r\n                <strong>{{ CartByUser.totalAfterPromoted }} VND</strong>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n    <div class=\"col mb-2\">\r\n      <div class=\"row\">\r\n        <div class=\"col-sm-12 col-md-6\">\r\n          <button class=\"btn btn-lg btn-submit w-100\" routerLink=\"/courses\">\r\n            Continue Shopping\r\n          </button>\r\n        </div>\r\n        <div class=\"col-sm-12 col-md-6 my-auto\">\r\n          <div class=\"row\" style=\"padding: 0 15px;\">\r\n            <div class=\"col-auto my-auto\">Promotion code:</div>\r\n            <div class=\"col\">\r\n              <input\r\n                type=\"text\"\r\n                [(ngModel)]=\"promotionCode\"\r\n                class=\"form-control\"\r\n              />\r\n            </div>\r\n            <div class=\"col-auto p-0\">\r\n              <button\r\n                class=\"btn\"\r\n                [class.btn-submit]=\"promotionCode\"\r\n                [class.btn-submitCode]=\"!promotionCode\"\r\n                [disabled]=\"!promotionCode\"\r\n                (click)=\"addPromotion()\"\r\n              >\r\n                Submit\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"row my-2\">\r\n    <div class=\"col-6 mx-auto payment\">\r\n      <div class=\"text-center h4 font-weight-bold\">Pay</div>\r\n      <hr />\r\n      <div [hidden]=\"paidFor\" #paypal></div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {\r\n  Component,\r\n  OnInit,\r\n  ViewChild,\r\n  ElementRef,\r\n  TemplateRef,\r\n} from '@angular/core';\r\nimport { LsHelper } from '../helper/ls.helper';\r\nimport { User } from 'src/model/user';\r\nimport { Cart } from 'src/model/cart';\r\nimport { AppService } from 'src/services/app.service';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { Router } from '@angular/router';\r\nimport { ItemCart } from 'src/model/item-cart';\r\nimport { BsModalRef, BsModalService } from 'ngx-bootstrap/modal';\r\n\r\ndeclare var paypal;\r\n\r\n@Component({\r\n  selector: 'app-cart',\r\n  templateUrl: './cart.component.html',\r\n  styleUrls: ['./cart.component.scss'],\r\n})\r\nexport class CartComponent implements OnInit {\r\n  @ViewChild('paypal', { static: true }) paypalElement: ElementRef;\r\n  hasCart = false;\r\n  user: User;\r\n  usdValue: number;\r\n  paymentMethod: string;\r\n\r\n  CartByUser: Cart = new Cart();\r\n\r\n  promotionCode: string;\r\n\r\n  loading = true;\r\n\r\n  modalRef: BsModalRef;\r\n  constructor(\r\n    private appService: AppService,\r\n    private toastr: ToastrService,\r\n    private router: Router,\r\n    private modalService: BsModalService\r\n  ) {}\r\n\r\n  paidFor = false;\r\n\r\n  ngOnInit(): void {\r\n    this.user = LsHelper.getUserFromStorage();\r\n    this.getCartByUser();\r\n    paypal\r\n      .Buttons({\r\n        createOrder: (data, actions) => {\r\n          return actions.order.create({\r\n            purchase_units: [\r\n              {\r\n                description: `Payment for ${this.user.name} cart.`,\r\n                amount: {\r\n                  currencyCode: 'USD',\r\n                  value: this.usdValue,\r\n                },\r\n              },\r\n            ],\r\n          });\r\n        },\r\n        onApprove: async (data, actions) => {\r\n          this.paymentMethod = 'paypal';\r\n          this.loading = true;\r\n          const order = await actions.order.capture();\r\n          this.paidFor = true;\r\n          this.paidCourses(this.paymentMethod);\r\n        },\r\n      })\r\n      .render(this.paypalElement.nativeElement);\r\n  }\r\n\r\n  getCartByUser() {\r\n    this.appService.getCartByUser().subscribe(\r\n      (res) => {\r\n        this.loading = false;\r\n        this.CartByUser = res;\r\n        this.convertCurrency(this.CartByUser.totalAfterPromoted);\r\n      },\r\n      (err) => {\r\n        this.toastr.warning(err.error.message);\r\n      }\r\n    );\r\n  }\r\n\r\n  convertCurrency(amount: number) {\r\n    this.appService.getCurrencyConverted(amount).subscribe(\r\n      (res) => {\r\n        this.usdValue = res;\r\n      },\r\n      (err) => {\r\n        this.toastr.warning(err.error.message);\r\n      }\r\n    );\r\n  }\r\n\r\n  paidCourses(paymentMethod: string) {\r\n    this.appService.paidCourses(paymentMethod).subscribe(\r\n      (res) => {\r\n        this.loading = false;\r\n        this.router.navigate(['profile']);\r\n        this.toastr.success('Checkout successfully!');\r\n      },\r\n      (err) => {\r\n        this.toastr.warning(err.error.message);\r\n      }\r\n    );\r\n  }\r\n\r\n  openModal(isDelete: TemplateRef<any>) {\r\n    this.modalRef = this.modalService.show(isDelete, { class: 'modal-sm' });\r\n  }\r\n\r\n  deleteCartItem(itemCart: ItemCart) {\r\n    this.loading = true;\r\n    this.modalRef.hide();\r\n    this.appService.deleteItemCart(itemCart.courseId).subscribe(\r\n      (res) => {\r\n        this.getCartByUser();\r\n        this.toastr.success('Deleted Successfully');\r\n      },\r\n      (err) => {\r\n        this.toastr.warning(err.error.message);\r\n      }\r\n    );\r\n  }\r\n\r\n  addPromotion() {\r\n    if (!this.promotionCode) {\r\n      return;\r\n    }\r\n    this.loading = true;\r\n    this.appService.addPromotionToCart(this.promotionCode).subscribe(\r\n      (res) => {\r\n        this.getCartByUser();\r\n        this.toastr.success('Submitted Successfully');\r\n      },\r\n      (err) => {\r\n        this.toastr.warning(err.error.message);\r\n        this.getCartByUser();\r\n      }\r\n    );\r\n  }\r\n\r\n  refresh(): void {\r\n    window.location.reload();\r\n  }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { AppService } from '../../services/app.service';\r\nimport { Course } from '../../model/course';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { User } from '../../model/user';\r\nimport { LsHelper } from '../helper/ls.helper';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { DomSanitizer, SafeResourceUrl } from '@angular/platform-browser';\r\nimport { BsModalRef, BsModalService } from 'ngx-bootstrap/modal';\r\nimport { LoginPopupComponent } from '../popup/login-popup/login-popup.component';\r\nimport { PersonalCourses } from 'src/model/personal-courses';\r\n\r\n@Component({\r\n  selector: 'app-course',\r\n  templateUrl: './course.component.html',\r\n  styleUrls: ['./course.component.scss'],\r\n})\r\nexport class CourseComponent implements OnInit {\r\n  course: any;\r\n  courseId: string;\r\n\r\n  modalRefLogin: BsModalRef;\r\n\r\n  user: User;\r\n\r\n  maxRating = 5;\r\n  rate: number;\r\n  isReadonlyView = true;\r\n  isReadonly = false;\r\n  hoverRate = 0;\r\n\r\n  srcYoutube: SafeResourceUrl;\r\n\r\n  comment: string;\r\n\r\n  personalCourses: PersonalCourses[] = [];\r\n\r\n  similarCourses: PersonalCourses[] = [];\r\n  recommendCourses: PersonalCourses[] = [];\r\n\r\n  constructor(\r\n    private appService: AppService,\r\n    private activatedRoute: ActivatedRoute,\r\n    private toastr: ToastrService,\r\n    private sanitizer: DomSanitizer,\r\n    private modalService: BsModalService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.user = LsHelper.getUserFromStorage();\r\n    this.activatedRoute.params.subscribe((param) => {\r\n      this.courseId = param.id;\r\n      if (this.user) {\r\n        this.appService.getUserById(this.user._id).subscribe(\r\n          (res) => {\r\n            this.user = res;\r\n            this.getCourseById(this.courseId);\r\n          },\r\n          (err) => {}\r\n        );\r\n      } else {\r\n        this.getCourseByIdNoneUser(this.courseId);\r\n      }\r\n    });\r\n  }\r\n  getCourseById(courseId: string) {\r\n    this.appService.getCourseById(courseId).subscribe(\r\n      (res: any) => {\r\n        this.course = res;\r\n        this.sortCourses(this.user,true);\r\n\r\n        this.checkReview();\r\n        if (this.course.lessons) {\r\n          this.updateVideoUrl(this.course.lessons[0].youtubeCode);\r\n        }\r\n      },\r\n      (err) => this.toastr.warning(err.error.message)\r\n    );\r\n  }\r\n\r\n  getCourseByIdNoneUser(courseId: string) {\r\n    this.appService.getCourseByIdNoneUser(courseId).subscribe(\r\n      (res: any) => {\r\n        this.course = res;\r\n        this.checkReview();\r\n        this.sortCourses(this.user,false);\r\n\r\n      },\r\n      (err) => this.toastr.warning(err.error.message)\r\n    );\r\n  }\r\n\r\n  hoveringOver(value: number): void {\r\n    this.hoverRate = value;\r\n  }\r\n\r\n  checkReview() {\r\n    if (!this.user) {\r\n      this.isReadonly = true;\r\n      return;\r\n    }\r\n    this.course.reviews.forEach((element) => {\r\n      if (element.userId === this.user._id) {\r\n        this.rate = element.rating;\r\n        this.hoverRate = element.rating;\r\n        return;\r\n      }\r\n      this.isReadonly = false;\r\n    });\r\n  }\r\n\r\n  addReview() {\r\n    if (\r\n      !this.rate ||\r\n      this.rate <= 0 ||\r\n      this.comment == null ||\r\n      this.comment === ''\r\n    ) {\r\n      return;\r\n    }\r\n    const review = {\r\n      comment: this.comment,\r\n      rating: this.rate,\r\n    };\r\n    this.appService.addReview(review, this.courseId).subscribe(\r\n      (res: any) => {\r\n        this.toastr.success('Reviewed');\r\n        this.getCourseById(this.courseId);\r\n      },\r\n      (err) => {\r\n        this.toastr.warning(err.error.message);\r\n      }\r\n    );\r\n  }\r\n\r\n  addCourseToCart(courseId: string) {\r\n    if (!this.user) {\r\n      const initialState = {\r\n        routing: 'course/' + this.courseId,\r\n      };\r\n      this.modalRefLogin = this.modalService.show(LoginPopupComponent, {\r\n        class: 'gray modal-md',\r\n        initialState,\r\n      });\r\n      this.modalRefLogin.content.event.subscribe((res) => {\r\n        this.refresh();\r\n      });\r\n    } else {\r\n      this.appService.addCourseToCart(courseId).subscribe(\r\n        (res: any) => {\r\n          this.toastr.success('Add Course successfully');\r\n        },\r\n        (err) => {\r\n          this.toastr.warning(err.error.message);\r\n        }\r\n      );\r\n    }\r\n  }\r\n\r\n  updateVideoUrl(srcYoutube) {\r\n    const path = 'https://www.youtube.com/embed/';\r\n    const dangerousVideoUrl = path + srcYoutube;\r\n    this.srcYoutube = this.sanitizer.bypassSecurityTrustResourceUrl(\r\n      dangerousVideoUrl\r\n    );\r\n  }\r\n\r\n  refresh(): void {\r\n    window.location.reload();\r\n  }\r\n\r\n  sortCourses(user: User, isLogin: boolean) {\r\n    this.appService.getAllCourses().subscribe((res: any) => {\r\n      let i = 0;\r\n      res.forEach((element) => {\r\n        this.personalCourses[i] = new PersonalCourses();\r\n        this.personalCourses[i].course = element;\r\n        i++;\r\n      });\r\n      \r\n      this.personalCourses = this.personalCourses.filter(\r\n        (item) => item.course._id != this.course._id\r\n      );\r\n        if(isLogin){\r\n      user.purchasedCourseIds.forEach((courseId) => {\r\n        this.personalCourses = this.personalCourses.filter(\r\n          (item) => item.course._id != courseId\r\n        );\r\n      });}\r\n      \r\n\r\n      this.personalCourses.forEach((course) => {\r\n        if(isLogin){\r\n        user.tags.forEach((tag) => {\r\n          if (course.course.tags.includes(tag)) {\r\n            course.countRecommend++;\r\n            return;\r\n          }\r\n        });}\r\n        this.course.tags.forEach((tag) => {\r\n          if (course.course.tags.includes(tag)) {\r\n            course.countSimilar++;\r\n            return;\r\n          }\r\n        });\r\n      });\r\n      if(isLogin){\r\n\r\n      \r\n      this.recommendCourses = [\r\n        ...this.personalCourses\r\n          .sort((a, b) => b.countRecommend - a.countRecommend)\r\n          .slice(0, 5),\r\n      ];}else{\r\n        this.recommendCourses = null;\r\n      }\r\n\r\n      this.similarCourses = [\r\n        ...this.personalCourses\r\n          .sort((a, b) => b.countSimilar - a.countSimilar)\r\n          .slice(0, 5),\r\n      ];\r\n    });\r\n  } \r\n\r\n  learnFreeCourse(courseId) {\r\n    if (!this.user) {\r\n      const initialState = {\r\n        routing: 'course/' + this.courseId,\r\n      };\r\n      this.modalRefLogin = this.modalService.show(LoginPopupComponent, {\r\n        class: 'gray modal-md',\r\n        initialState,\r\n      });\r\n      this.modalRefLogin.content.event.subscribe((res) => {\r\n        this.refresh();\r\n      });\r\n    }else {\r\n    this.appService.learnFreeCourse(courseId).subscribe(\r\n      (res) => {\r\n        this.getCourseById(courseId);\r\n        this.toastr.success('Successfully');\r\n      },\r\n      (err) => {\r\n        this.toastr.warning(err.error.message);\r\n      }\r\n    );\r\n  }\r\n}\r\n}\r\n","<div class=\"container my-5\">\r\n  <div class=\"row justify-content-center\">\r\n    <div class=\"col-8\">\r\n      <!-- Begin card details -->\r\n      <div class=\"card\" *ngIf=\"course\">\r\n        <img\r\n          class=\"card-img-top\"\r\n          style=\"max-height: 450px;\"\r\n          src=\"../../assets/img/{{ course.imgPath }}\"\r\n          alt=\"Card image cap\"\r\n        />\r\n        <div class=\"card-body\">\r\n          <div class=\"row\">\r\n            <h1\r\n              class=\"col-12 card-title text-center h4 mb-2 my-color\"\r\n              *ngIf=\"course\"\r\n            >\r\n              {{ course.name }}\r\n            </h1>\r\n            <rating\r\n              [ngModel]=\"course.rating\"\r\n              class=\"col-auto rating\"\r\n              [max]=\"maxRating\"\r\n              [readonly]=\"isReadonlyView\"\r\n            >\r\n            </rating>\r\n            <div class=\"col-auto mt-2\">{{ course.rating }}</div>\r\n            <div class=\"col text-right mt-2\">\r\n              <small class=\"text-muted\" style=\"font-size: 15px;\">\r\n                <i class=\"ion ion-clock\"></i>\r\n                {{ course.uploadDate | date }}\r\n              </small>\r\n            </div>\r\n          </div>\r\n          <div class=\"row my-2\">\r\n            <div class=\"col-auto\">\r\n              <span class=\"font-weight-bold\">Tags: </span>\r\n              <span *ngFor=\"let tag of course.tags\"> {{ tag }},</span>\r\n            </div>\r\n          </div>\r\n          <div class=\"row my-2\">\r\n            <div class=\"col-2 font-weight-bold\">Description</div>\r\n            <div class=\"col-10\">{{ course.description }}</div>\r\n          </div>\r\n          <div *ngIf=\"!course.lessons\">\r\n            <div class=\"row font-weight-bold my-1 h4\">\r\n              <div class=\"col-4 font-weight-bold\">Price:</div>\r\n              <div class=\"col-8\" *ngIf=\"course.price > 0\">\r\n                {{ course.price }} VND\r\n              </div>\r\n              <div class=\"col-8\" *ngIf=\"course.price == 0\">FREE</div>\r\n            </div>\r\n            <div class=\"row my-2\">\r\n              <div class=\"col-4 mx-auto\">\r\n                <button *ngIf=\"course.price > 0\"\r\n                  class=\"w-100 btn btn-cart font-weight-bold py-2\"\r\n                  (click)=\"addCourseToCart(course._id)\"\r\n                >\r\n                  Add To Cart\r\n                </button>\r\n                <button *ngIf=\"course.price == 0\"\r\n                  class=\"w-100 btn btn-cart font-weight-bold py-2\"\r\n                  (click)=\"learnFreeCourse(course._id)\"\r\n                >\r\n                  LEARN NOW\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <hr />\r\n          <div *ngIf=\"course.lessons\" class=\"row\" style=\"overflow: auto;\">\r\n            <div class=\"col-12 videowrapper\" *ngIf=\"srcYoutube\">\r\n              <iframe\r\n                class=\"px-3\"\r\n                [src]=\"srcYoutube\"\r\n                frameborder=\"0\"\r\n                allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\"\r\n                allowfullscreen\r\n              ></iframe>\r\n            </div>\r\n            <div class=\"w-50 mx-auto lesson-list mt-4 mb-2 py-3\">\r\n              <div class=\"col-12 h5 title-lesson\">\r\n                <i class=\"fa fa-bars\" aria-hidden=\"true\"></i> LESSON LIST\r\n              </div>\r\n              <hr />\r\n              <div class=\"col-12\">\r\n                <div\r\n                  class=\"col-12 py-2 cursor-pointer\"\r\n                  (click)=\"updateVideoUrl(lesson.youtubeCode)\"\r\n                  *ngFor=\"let lesson of course.lessons\"\r\n                >\r\n                  {{ lesson.name }}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <hr />\r\n          <div class=\"container my-4\">\r\n            <div class=\"row h3 text-muted mb-4\">Reviews</div>\r\n            <div *ngIf=\"course.reviews\" class=\"review\">\r\n              <div\r\n                class=\"row justify-content-center\"\r\n                *ngFor=\"let review of course.reviews\"\r\n              >\r\n                <div class=\"row col-10 px-0\">\r\n                  <div class=\"col-auto text-muted my-2\">\r\n                    {{ review.userName }}\r\n                  </div>\r\n                  <div class=\"col-auto my-2\">\r\n                    <rating\r\n                      style=\"font-size: 18px;\"\r\n                      class=\"text-center rating\"\r\n                      [ngModel]=\"review.rating\"\r\n                      [max]=\"maxRating\"\r\n                      readonly=\"true\"\r\n                    >\r\n                    </rating>\r\n                  </div>\r\n                  <div class=\"col ml-auto text-right my-2\">\r\n                    <span class=\"font-italic text-muted\">{{\r\n                      review.createdOn | date: \"MMM d, y, h:mm:ss a\"\r\n                    }}</span>\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-10\">\r\n                  <div class=\"media\">\r\n                    <img\r\n                      class=\"d-flex mr-3\"\r\n                      style=\"width: 60px; height: 60px; border-radius: 100%;\"\r\n                      src=\"http://i.pravatar.cc/300\"\r\n                      alt=\"Recipe author avatar\"\r\n                    />\r\n                    <div class=\"media-body\">\r\n                      {{ review.comment }}\r\n                    </div>\r\n                  </div>\r\n                  <hr />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"row mx-auto rate-me\">\r\n            <div class=\"col-12 h3 text-center mt-4 text-rate font-weight-bold\">\r\n              RATE ME\r\n            </div>\r\n            <rating\r\n              (onHover)=\"hoveringOver($event)\"\r\n              class=\"col-12 text-center rating-user\"\r\n              [(ngModel)]=\"rate\"\r\n              [max]=\"maxRating\"\r\n              [readonly]=\"isReadonly\"\r\n            ></rating>\r\n            <div\r\n              *ngIf=\"rate == null\"\r\n              class=\"col-12 h3 text-center mb-4 mt-2 text-rate\"\r\n            >\r\n              {{ hoverRate }} <i class=\"ion ion-star text-rate\"></i>\r\n            </div>\r\n            <div\r\n              *ngIf=\"rate > 0\"\r\n              class=\"col-12 h3 text-center mb-4 mt-2 text-rate\"\r\n            >\r\n              {{ rate }} <i class=\"ion ion-star text-rate\"></i>\r\n            </div>\r\n          </div>\r\n          <hr />\r\n\r\n          <h3 class=\"mb-3 mt-3 text-muted\">Leave a review</h3>\r\n          <textarea\r\n            [(ngModel)]=\"comment\"\r\n            cols=\"5\"\r\n            rows=\"5\"\r\n            class=\"form-control\"\r\n            placeholder=\"Leave a review for this recipe...\"\r\n          ></textarea>\r\n          <button\r\n            class=\"btn btn-search btn-sm mt-3 float-right\"\r\n            (click)=\"addReview()\"\r\n          >\r\n            Save review\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"col-3\" *ngIf=\"personalCourses.length > 0\">\r\n      <h4 class=\"text-center my-color\" *ngIf=\"recommendCourses\">Recommend For You</h4>\r\n      <div class=\"row here\" *ngIf=\"recommendCourses\">\r\n        <div class=\"scrollbar sbId\">\r\n          <div class=\"mb-3\" *ngFor=\"let item of recommendCourses\">\r\n            <div class=\"img-zoom\">\r\n              <img\r\n                routerLink=\"/course/{{ item.course._id }}\"\r\n                class=\"card-img-top\"\r\n                style=\"cursor: pointer;\"\r\n                src=\"../../assets/img/{{ item.course.imgPath }}\"\r\n                alt=\"Card image cap\"\r\n              />\r\n            </div>\r\n            <div class=\"card-body\" style=\"padding: 5px;\">\r\n              <h6 class=\"card-title text-center\">\r\n                <a href=\"/course/{{ item.course._id }}\" style=\"color: black;\">{{\r\n                  item.course.name\r\n                }}</a>\r\n              </h6>\r\n              <div\r\n                style=\"cursor: pointer;\"\r\n                class=\"border-price my-3\"\r\n                routerLink=\"/course/{{ item.course._id }}\"\r\n              >\r\n                <p class=\"h5 text-center text-danger\">\r\n                  {{ item.course.view }}\r\n                </p>\r\n              </div>\r\n              <p class=\"h6 text-center\">\r\n                <span class=\"mr-3 h5\"\r\n                  ><i class=\"fa fa-comments-o\"></i>\r\n                  {{ item.course.reviews.length }}\r\n                </span>\r\n                <span class=\"mr-3 h5\"\r\n                  ><i class=\"ion ion-star\"></i> {{ item.course.rating }}\r\n                </span>\r\n                <span class=\"mr-3 h5\"\r\n                  ><i class=\"fa fa-shopping-cart\"></i>\r\n                  {{ item.course.purchasedCount }}\r\n                </span>\r\n              </p>\r\n            </div>\r\n            <hr style=\"margin: 0.5rem;\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <hr *ngIf=\"recommendCourses\"/>\r\n      <h4 class=\"text-center my-color mb-2 mt-4\">Similar Courses</h4>\r\n      <div class=\"row here\">\r\n        <div class=\"scrollbar sbId\">\r\n          <div class=\"mb-3\" *ngFor=\"let item of similarCourses\">\r\n            <div class=\"img-zoom\">\r\n              <img\r\n                routerLink=\"/course/{{ item.course._id }}\"\r\n                class=\"card-img-top\"\r\n                style=\"cursor: pointer;\"\r\n                src=\"../../assets/img/{{ item.course.imgPath }}\"\r\n                alt=\"Card image cap\"\r\n              />\r\n            </div>\r\n            <div class=\"card-body\" style=\"padding: 5px;\">\r\n              <h6 class=\"card-title text-center\">\r\n                <a href=\"/course/{{ item.course._id }}\" style=\"color: black;\">{{\r\n                  item.course.name\r\n                }}</a>\r\n              </h6>\r\n              <div\r\n                style=\"cursor: pointer;\"\r\n                class=\"border-price my-3\"\r\n                routerLink=\"/course/{{ item.course._id }}\"\r\n              >\r\n                <p class=\"h5 text-center text-danger\">\r\n                  {{ item.course.view }}\r\n                </p>\r\n              </div>\r\n              <p class=\"h6 text-center\">\r\n                <span class=\"mr-3 h5\"\r\n                  ><i class=\"fa fa-comments-o\"></i>\r\n                  {{ item.course.reviews.length }}\r\n                </span>\r\n                <span class=\"mr-3 h5\"\r\n                  ><i class=\"ion ion-star\"></i> {{ item.course.rating }}\r\n                </span>\r\n                <span class=\"mr-3 h5\"\r\n                  ><i class=\"fa fa-shopping-cart\"></i>\r\n                  {{ item.course.purchasedCount }}\r\n                </span>\r\n              </p>\r\n            </div>\r\n            <hr style=\"margin: 0.5rem;\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { AppService } from '../../services/app.service';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { Course } from '../../model/course';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { User } from 'src/model/user';\r\nimport { LsHelper } from '../helper/ls.helper';\r\nimport { element } from 'protractor';\r\n\r\nenum SortType {\r\n  Rating = 0,\r\n  Favorite = 1,\r\n  Free = 2,\r\n}\r\n\r\n@Component({\r\n  selector: 'app-courses',\r\n  templateUrl: './courses.component.html',\r\n  styleUrls: ['./courses.component.scss'],\r\n})\r\nexport class CoursesComponent implements OnInit {\r\n  courses: Course[] = [];\r\n  categoryId: string;\r\n  categoryName: string;\r\n\r\n  categories: any;\r\n  searchCategory: string;\r\n  selectCategory = 'All';\r\n  all = 'All';\r\n\r\n  inputString = '';\r\n  searchString: string;\r\n  user: User;\r\n  config: any;\r\n  purchasedCourseIds: string[] = [];\r\n\r\n  totalCount: number;\r\n  sortType: number;\r\n\r\n  loading = true;\r\n  constructor(\r\n    private appService: AppService,\r\n    private activatedRoute: ActivatedRoute,\r\n    private toastr: ToastrService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.user = LsHelper.getUserFromStorage();\r\n\r\n    this.activatedRoute.params.subscribe((param) => {\r\n      this.categoryId = param.categoryId;\r\n    });\r\n\r\n    this.activatedRoute.params.subscribe((param) => {\r\n      this.sortType = param.sortType;\r\n    });\r\n    this.getAllCategories();\r\n    if (this.categoryId != null) {\r\n      this.getAllCoursesByCategoryId(this.categoryId);\r\n      this.getCategoryById(this.categoryId);\r\n    } else if (this.sortType) {\r\n      this.getAllCourses(this.sortType);\r\n    } else {\r\n      this.getAllCourses(SortType.Rating);\r\n    }\r\n    this.config = {\r\n      itemsPerPage: 9,\r\n      currentPage: 1,\r\n      totalItems: this.totalCount,\r\n    };\r\n  }\r\n\r\n  getAllCourses(sortType) {\r\n    this.loading = true;\r\n    this.appService.getAllCourses().subscribe((res: any) => {\r\n      this.courses = res;\r\n      this.ViewCourses();\r\n      if (sortType == -1) {\r\n        return;\r\n      }\r\n      if (sortType == SortType.Rating) {\r\n        this.courses = this.courses.sort((leftRate, rightTate): number => {\r\n          if (leftRate.rating > rightTate.rating) {\r\n            return -1;\r\n          }\r\n          if (leftRate.rating < rightTate.rating) {\r\n            return 1;\r\n          }\r\n          return 0;\r\n        });\r\n      } else if (sortType == SortType.Favorite) {\r\n        this.courses = this.courses.sort(\r\n          (leftFavorite, rightFavorite): number => {\r\n            if (leftFavorite.purchasedCount > rightFavorite.purchasedCount) {\r\n              return -1;\r\n            }\r\n            if (leftFavorite.purchasedCount < rightFavorite.purchasedCount) {\r\n              return 1;\r\n            }\r\n            return 0;\r\n          }\r\n        );\r\n      } else if (sortType == SortType.Free) {\r\n        this.courses = this.courses.filter((item) => {\r\n          return item.price == 0;\r\n        });\r\n        this.courses = this.courses.sort(\r\n          (leftRate: Course, rightTate: Course): number => {\r\n            if (leftRate.rating > rightTate.rating) {\r\n              return -1;\r\n            }\r\n            if (leftRate.rating < rightTate.rating) {\r\n              return 1;\r\n            }\r\n            return 0;\r\n          }\r\n        );\r\n      }\r\n    });\r\n  }\r\n\r\n  getAllCoursesByCategoryId(categoryId: string) {\r\n    this.loading = true;\r\n    this.appService.getCoursesByCategoryId(categoryId).subscribe((res: any) => {\r\n      this.courses = res;\r\n      this.totalCount = this.courses.length;\r\n      this.ViewCourses();\r\n    });\r\n  }\r\n\r\n  getCategoryById(categoryId: string) {\r\n    this.appService.getCategoryById(categoryId).subscribe(\r\n      (res) => {\r\n        this.categoryName = res.name;\r\n      },\r\n      (err) => {\r\n        this.toastr.warning(err.error.message);\r\n        this.loading = false;\r\n      }\r\n    );\r\n  }\r\n\r\n  getAllCategories() {\r\n    this.appService.getAllCategories().subscribe(\r\n      (res: any) => {\r\n        this.categories = res;\r\n      },\r\n      (err) => {\r\n        this.toastr.warning(err.error.message);\r\n        this.loading = false;\r\n      }\r\n    );\r\n  }\r\n\r\n  searchCourses() {\r\n    this.loading = true;\r\n    this.courses = [];\r\n    this.searchString = this.inputString;\r\n    this.searchCategory = this.selectCategory;\r\n    if (this.searchCategory === 'All') {\r\n      this.appService.getAllCourses().subscribe(\r\n        (res: Course[]) => {\r\n          if (this.searchString === '') {\r\n            this.courses = res;\r\n            this.ViewCourses();\r\n            return;\r\n          }\r\n          res.forEach((element) => {\r\n            if (element.name.includes(this.searchString)) {\r\n              this.courses.push(element);\r\n            } else {\r\n              element.tags.forEach((tag) => {\r\n                if (this.searchString.toLowerCase() === tag.toLowerCase()) {\r\n                  this.courses.push(element);\r\n                }\r\n              });\r\n            }\r\n          });\r\n          this.ViewCourses();\r\n        },\r\n        (err) => {\r\n          this.toastr.warning(err.error.message);\r\n          this.loading = false;\r\n        }\r\n      );\r\n    } else {\r\n      this.appService.getCoursesByCategoryId(this.searchCategory).subscribe(\r\n        (res: Course[]) => {\r\n          if (this.searchString === '') {\r\n            this.courses = res;\r\n            this.ViewCourses();\r\n            return;\r\n          }\r\n          res.forEach((element) => {\r\n            if (element.name.includes(this.searchString)) {\r\n              this.courses.push(element);\r\n            } else {\r\n              element.tags.forEach((tag) => {\r\n                if (this.searchString.toLowerCase() === tag.toLowerCase()) {\r\n                  this.courses.push(element);\r\n                }\r\n              });\r\n            }\r\n          });\r\n          this.ViewCourses();\r\n        },\r\n        (err) => {\r\n          this.toastr.warning(err.error.message);\r\n          this.loading = false;\r\n        }\r\n      );\r\n    }\r\n  }\r\n\r\n  ViewCourses() {\r\n    this.loading = false;\r\n    this.totalCount = this.courses.length;\r\n    if (!this.user) {\r\n      for (let i = 0; i < this.courses.length; i++) {\r\n        if (this.courses[i].price > 0) {\r\n          this.courses[i].view = String(this.courses[i].price) + ' VND';\r\n        } else {\r\n          this.courses[i].view = 'FREE';\r\n        }\r\n      }\r\n    } else {\r\n      this.appService.getUserById(this.user._id).subscribe(\r\n        (res) => {\r\n          this.purchasedCourseIds = res.purchasedCourseIds;\r\n          for (let i = 0; i < this.courses.length; i++) {\r\n            if (\r\n              this.purchasedCourseIds.some((x) => x === this.courses[i]._id)\r\n            ) {\r\n              this.courses[i].view = 'LEARN NOW';\r\n            } else if (this.courses[i].price > 0) {\r\n              this.courses[i].view = String(this.courses[i].price) + ' VND';\r\n            } else {\r\n              this.courses[i].view = 'FREE';\r\n            }\r\n          }\r\n        },\r\n        (err) => {}\r\n      );\r\n    }\r\n  }\r\n\r\n  pageChanged(numpage) {\r\n    this.config.currentPage = numpage;\r\n  }\r\n}\r\n","<div class=\"container my-3\">\r\n  <h1 class=\"text-center display-3 my-3 my-color\">All Courses</h1>\r\n  <div class=\"row\">\r\n    <div class=\"col-lg-6\">\r\n      <input [(ngModel)]=\"inputString\" type=\"text\" placeholder=\"Course's name/Tag...\" class=\"form-control mb-3\" />\r\n    </div>\r\n    <div class=\"col-lg-4\">\r\n      <select [(ngModel)]=\"selectCategory\" class=\"form-control mb-5\">\r\n        <option [value]=\"all\" selected> Categories</option>\r\n        <option [value]=\"item._id\" *ngFor=\"let item of categories\">{{\r\n          item.name\r\n        }}</option>\r\n      </select>\r\n    </div>\r\n    <div class=\"col-lg-auto\">\r\n      <div class=\"btn btn-search\" (click)=\"searchCourses()\">\r\n        <i class=\"fa fa-search\" aria-hidden=\"true\"></i> Search\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"row\">\r\n    <div class=\"col-auto\">\r\n      <div class=\"h3\" *ngIf=\"categoryId != null\">\r\n        By category: {{ categoryName }}\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"row mt-3\">\r\n    <div class=\"h3 row\" *ngIf=\"!courses.length && !loading\">No Result</div>\r\n    <div class=\"row w-100\" *ngIf=\"loading\">\r\n      <div class=\"lds-roller col-auto mx-auto\">\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n      </div>\r\n    </div>\r\n    <div class=\"row\" *ngIf=\"courses.length!=0 && !loading\">\r\n\r\n      <div class=\"col-4\" *ngFor=\"let item of courses | paginate: config; let i = index\">\r\n        <div class=\"card mb-3\">\r\n          <div class=\"img-zoom\">\r\n            <img routerLink=\"/course/{{ item._id }}\" class=\"card-img-top\" style=\"height: 220px; cursor: pointer;\"\r\n              src=\"../../assets/img/{{ item.imgPath }}\" alt=\"Card image cap\" />\r\n          </div>\r\n          <div class=\"card-body\">\r\n            <h5 class=\"card-title text-center\" style=\"height: 60px;\">\r\n              <a href=\"/course/{{ item._id }}\">{{ item.name }}</a>\r\n            </h5>\r\n            <hr />\r\n            <p class=\"text-sm mb-2\" style=\"height: 40px;\">\r\n              <span class=\"text-muted float-right\">\r\n                <i class=\"ion ion-clock\"></i>\r\n                {{ item.uploadDate | date }}\r\n              </span>\r\n              <small class=\"font-italic\">\r\n                <span class=\"text-muted\">tag</span>\r\n                <span *ngFor=\"let tag of item.tags\"> {{ tag }},</span>\r\n              </small>\r\n            </p>\r\n            <div style=\"cursor: pointer;\" class=\"border-price my-3\" routerLink=\"/course/{{ item._id }}\">\r\n              <p class=\"h5 text-center text-danger\">\r\n                {{ item.view }}\r\n              </p>\r\n            </div>\r\n            <p class=\"h6 text-center\">\r\n              <span class=\"mr-3 h5\"><i class=\"fa fa-comments-o\"></i> {{ item.reviews.length }}\r\n              </span>\r\n              <span class=\"mr-3 h5\"><i class=\"ion ion-star\"></i> {{ item.rating }}\r\n              </span>\r\n              <span class=\"mr-3 h5\"><i class=\"fa fa-shopping-cart\"></i> {{ item.purchasedCount }}\r\n              </span>\r\n            </p>\r\n          </div>\r\n        </div>\r\n        <br />\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"row\">\r\n    <pagination-controls class=\"col-auto\" (pageChange)=\"pageChanged($event)\"></pagination-controls>\r\n  </div>\r\n</div>\r\n","import {\r\n  ActivatedRouteSnapshot,\r\n  CanActivate,\r\n  Router,\r\n  RouterStateSnapshot,\r\n} from '@angular/router';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { LsHelper } from '../helper/ls.helper';\r\n\r\n@Injectable()\r\nexport class UserValidGuard implements CanActivate {\r\n  constructor(private router: Router) {}\r\n\r\n  public canActivate(\r\n    route: ActivatedRouteSnapshot,\r\n    state: RouterStateSnapshot\r\n  ): Observable<boolean> | boolean {\r\n    const user = LsHelper.getUserFromStorage();\r\n    if (user) {\r\n      return true;\r\n    } else {\r\n      this.router.navigate(['']);\r\n      return false;\r\n    }\r\n  }\r\n}\r\n","export class LsHelper {\r\n  // todo: create user model\r\n  private static readonly USER_LOCAL: string = 'user';\r\n\r\n  public static saveUserToStorage(user: any): void {\r\n    localStorage.setItem(this.USER_LOCAL, JSON.stringify(user));\r\n  }\r\n\r\n  public static getUserFromStorage(): any {\r\n    const currentUser = localStorage.getItem(this.USER_LOCAL);\r\n\r\n    if (!currentUser || currentUser === '') {\r\n      return undefined;\r\n    }\r\n\r\n    const user: any = JSON.parse(currentUser);\r\n    const u1: any = JSON.parse(atob(user.token.split('.')[1]));\r\n\r\n    return u1;\r\n  }\r\n\r\n  public static removeUserStorage(): void {\r\n    localStorage.removeItem(this.USER_LOCAL);\r\n  }\r\n\r\n  public static getToken(): any {\r\n    const currentUser = localStorage.getItem(this.USER_LOCAL);\r\n\r\n    if (!currentUser || currentUser === '') {\r\n      return undefined;\r\n    }\r\n\r\n    const user: any = JSON.parse(currentUser);\r\n    return user.token;\r\n  }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { AppService } from 'src/services/app.service';\r\nimport { Course } from 'src/model/course';\r\nimport { User } from 'src/model/user';\r\nimport { LsHelper } from '../helper/ls.helper';\r\n\r\n@Component({\r\n  selector: 'app-home',\r\n  templateUrl: './home.component.html',\r\n  styleUrls: ['./home.component.scss'],\r\n})\r\nexport class HomeComponent implements OnInit {\r\n  topRateCourses: Course[] = [];\r\n  topFavorites: Course[] = [];\r\n  topFreeCourses: Course[] = [];\r\n  purchasedCourseIds: string[] = [];\r\n\r\n  user: User;\r\n  constructor(private appService: AppService) {}\r\n\r\n  ngOnInit(): void {\r\n    this.user = LsHelper.getUserFromStorage();\r\n    this.getTopRatedCourses();\r\n    this.getTopFavorites();\r\n    this.getTopFreeCourses();\r\n  }\r\n\r\n  getTopRatedCourses() {\r\n    this.appService.getAllCourses().subscribe((res: any) => {\r\n      this.topRateCourses = res;\r\n      this.topRateCourses = this.topRateCourses.sort(\r\n        (leftRate, rightTate): number => {\r\n          if (leftRate.rating > rightTate.rating) return -1;\r\n          if (leftRate.rating < rightTate.rating) return 1;\r\n          return 0;\r\n        }\r\n      );\r\n      this.topRateCourses.splice(4, this.topRateCourses.length - 4);\r\n      if (!this.user) {\r\n        for (let i = 0; i < this.topRateCourses.length; i++) {\r\n          if (this.topRateCourses[i].price > 0) {\r\n            this.topRateCourses[i].view =\r\n              String(this.topRateCourses[i].price) + ' VND';\r\n          } else this.topRateCourses[i].view = 'FREE';\r\n        }\r\n      } else  {\r\n        this.appService.getUserById(this.user._id).subscribe(\r\n          (res) => {\r\n            this.purchasedCourseIds = res.purchasedCourseIds;\r\n            for (let i = 0; i < this.topRateCourses.length; i++) {\r\n              if (\r\n                this.purchasedCourseIds.some(\r\n                  (x) => x === this.topRateCourses[i]._id\r\n                )\r\n              ) {\r\n                this.topRateCourses[i].view = 'LEARN NOW';\r\n              } else if (this.topRateCourses[i].price > 0) {\r\n                this.topRateCourses[i].view =\r\n                  String(this.topRateCourses[i].price) + ' VND';\r\n              } else this.topRateCourses[i].view = 'FREE';\r\n            }\r\n          },\r\n          (err) => {}\r\n        );\r\n      }\r\n    });\r\n  }\r\n  getTopFavorites() {\r\n    this.appService.getAllCourses().subscribe((res: any) => {\r\n      this.topFavorites = res;\r\n      this.topFavorites = this.topFavorites.sort(\r\n        (leftFavorite, rightFavorite): number => {\r\n          if (leftFavorite.purchasedCount > rightFavorite.purchasedCount)\r\n            return -1;\r\n          if (leftFavorite.purchasedCount < rightFavorite.purchasedCount)\r\n            return 1;\r\n          return 0;\r\n        }\r\n      );\r\n\r\n      this.topFavorites.splice(4, this.topFavorites.length - 4);\r\n      if (!this.user) {\r\n        for (let i = 0; i < this.topFavorites.length; i++) {\r\n          if (this.topFavorites[i].price > 0) {\r\n            this.topFavorites[i].view =\r\n              String(this.topFavorites[i].price) + ' VND';\r\n          } else this.topFavorites[i].view = 'FREE';\r\n        }\r\n      } else  {\r\n        this.appService.getUserById(this.user._id).subscribe(\r\n          (res) => {\r\n            this.purchasedCourseIds = res.purchasedCourseIds;\r\n            for (let i = 0; i < this.topFavorites.length; i++) {\r\n              if (\r\n                this.purchasedCourseIds.some(\r\n                  (x) => x === this.topFavorites[i]._id\r\n                )\r\n              ) {\r\n                this.topFavorites[i].view = 'LEARN NOW';\r\n              } else if (this.topFavorites[i].price > 0) {\r\n                this.topFavorites[i].view =\r\n                  String(this.topFavorites[i].price) + ' VND';\r\n              } else this.topFavorites[i].view = 'FREE';\r\n            }\r\n          },\r\n          (err) => {}\r\n        );\r\n      }\r\n    });\r\n  }\r\n\r\n  getTopFreeCourses() {\r\n    this.appService.getAllCourses().subscribe((res: any) => {\r\n      this.topFreeCourses = res;\r\n      this.topFreeCourses = this.topFreeCourses.filter((item) => {\r\n        return item.price == 0;\r\n      });\r\n\r\n      this.topFreeCourses = this.topFreeCourses.sort(\r\n        (leftFree, rightFree): number => {\r\n          if (leftFree.rating > rightFree.rating) return -1;\r\n          if (leftFree.rating < rightFree.rating) return 1;\r\n          return 0;\r\n        }\r\n      );\r\n\r\n      this.topFreeCourses.splice(4, this.topFreeCourses.length - 4);\r\n      if (!this.user) {\r\n        for (let i = 0; i < this.topFreeCourses.length; i++) {\r\n          this.topFreeCourses[i].view = 'FREE';\r\n        }\r\n      } else  {\r\n        this.appService.getUserById(this.user._id).subscribe(\r\n          (res) => {\r\n            this.purchasedCourseIds = res.purchasedCourseIds;\r\n            for (let i = 0; i < this.topFreeCourses.length; i++) {\r\n              if (\r\n                this.purchasedCourseIds.some(\r\n                  (x) => x === this.topFreeCourses[i]._id\r\n                )\r\n              ) {\r\n                this.topFreeCourses[i].view = 'LEARN NOW';\r\n              } else this.topFreeCourses[i].view = 'FREE';\r\n            }\r\n          },\r\n          (err) => {}\r\n        );\r\n      }\r\n    });\r\n  }\r\n}\r\n","<div class=\"container-fluid\">\r\n  <div\r\n    id=\"jumbotron\"\r\n    class=\"jumbotron row\"\r\n    style=\"\r\n      background-image: url('../../assets/img/banner.png');\r\n      background-repeat: no-repeat;\r\n      background-position: center center;\r\n      background-size: cover;\r\n    \"\r\n  >\r\n    <div class=\"col-12\" style=\"height: 42%;\"></div>\r\n\r\n    <div class=\"col-12 mx-auto\" style=\"text-align: center;\">\r\n      <a class=\"font-weight-bold btn btn-learn mx-auto\" href=\"#freeCode\">\r\n        LEARN FOR FREE\r\n      </a>\r\n    </div>\r\n  </div>\r\n  <div class=\"row\">\r\n    <img class=\"sale mx-auto\" src=\"../../assets/img/sale1.png\" />\r\n  </div>\r\n  <div class=\"container-fluid px-5 my-2\">\r\n    <h1\r\n      class=\"display-4 text-center my-2 wow fadeInDown my-color\"\r\n      style=\"padding: 10px 0px;\"\r\n    >\r\n      <i class=\"ion ion-star my-color\"></i>\r\n      Top Rated Courses\r\n    </h1>\r\n    <br />\r\n    <div class=\"card-deck wow fadeIn my-color\" data-wow-duration=\"4s\">\r\n      <div class=\"col-3\" *ngFor=\"let item of topRateCourses\">\r\n        <div class=\"card mb-3\">\r\n          <div class=\"img-zoom\">\r\n            <img\r\n              class=\"card-img-top\"\r\n              style=\"height: 200px; cursor: pointer;\"\r\n              src=\"../../assets/img/{{ item.imgPath }}\"\r\n              alt=\"Card image cap\"\r\n            />\r\n          </div>\r\n          <div class=\"card-body\">\r\n            <h5 class=\"card-title text-center\" style=\"height: 60px;\">\r\n              <a href=\"/course/{{ item._id }}\">{{ item.name }}</a>\r\n            </h5>\r\n            <hr />\r\n            <p class=\"text-sm mb-2\" style=\"height: 40px;\">\r\n              <span class=\"text-muted float-right\">\r\n                <i class=\"ion ion-clock\"></i>\r\n                {{ item.uploadDate | date }}</span\r\n              >\r\n              <small class=\"font-italic\">\r\n                <span class=\"text-muted\">tag</span>\r\n                <span *ngFor=\"let tag of item.tags\"> {{ tag }},</span>\r\n              </small>\r\n            </p>\r\n            <!-- todo: payroll link -->\r\n            <div class=\"border-price my-3\" routerLink=\"/course/{{ item._id }}\">\r\n              <p class=\"h5 text-center text-danger\">\r\n                {{ item.view }}\r\n              </p>\r\n            </div>\r\n            <p class=\"h6 text-center\">\r\n              <span class=\"mr-3 h5\"\r\n                ><i class=\"fa fa-comments-o\"></i> {{ item.reviews.length }}\r\n              </span>\r\n              <span class=\"mr-3 h5\"\r\n                ><i class=\"ion ion-star\"></i> {{ item.rating }}\r\n              </span>\r\n              <span class=\"mr-3 h5\"\r\n                ><i class=\"fa fa-shopping-cart\"></i> {{ item.purchasedCount }}\r\n              </span>\r\n            </p>\r\n          </div>\r\n        </div>\r\n        <br />\r\n      </div>\r\n    </div>\r\n    <div class=\"read-seller\">\r\n      <button class=\"btn\" routerLink=\"/courses/sort/0\">View more</button>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"container-fluid px-5 my-2\">\r\n    <hr />\r\n    <h1\r\n      class=\"display-4 text-center my-2 wow fadeInDown my-color\"\r\n      style=\"padding: 10px 0px;\"\r\n    >\r\n      <i class=\"ion ion-heart my-color\"></i>\r\n      Most favorited Courses\r\n    </h1>\r\n    <br />\r\n    <div class=\"card-deck wow fadeIn my-color\" data-wow-duration=\"4s\">\r\n      <div class=\"col-3\" *ngFor=\"let item of topFavorites\">\r\n        <div class=\"card mb-3\">\r\n          <div class=\"img-zoom\">\r\n            <img\r\n              class=\"card-img-top\"\r\n              style=\"height: 200px; cursor: pointer;\"\r\n              src=\"../../assets/img/{{ item.imgPath }}\"\r\n              alt=\"Card image cap\"\r\n            />\r\n          </div>\r\n          <div class=\"card-body\">\r\n            <h5 class=\"card-title text-center\" style=\"height: 60px;\">\r\n              <a href=\"/course/{{ item._id }}\">{{ item.name }}</a>\r\n            </h5>\r\n            <hr />\r\n            <p class=\"text-sm mb-2\" style=\"height: 40px;\">\r\n              <span class=\"text-muted float-right\">\r\n                <i class=\"ion ion-clock\"></i>\r\n                {{ item.uploadDate | date }}</span\r\n              >\r\n              <small class=\"font-italic\">\r\n                <span class=\"text-muted\">tag</span>\r\n                <span *ngFor=\"let tag of item.tags\"> {{ tag }},</span>\r\n              </small>\r\n            </p>\r\n            <!-- todo: payroll link -->\r\n            <div class=\"border-price my-3\" routerLink=\"/course/{{ item._id }}\">\r\n              <p class=\"h5 text-center text-danger\">\r\n                {{ item.view }}\r\n              </p>\r\n            </div>\r\n            <p class=\"h6 text-center\">\r\n              <span class=\"mr-3 h5\"\r\n                ><i class=\"fa fa-comments-o\"></i> {{ item.reviews.length }}\r\n              </span>\r\n              <span class=\"mr-3 h5\"\r\n                ><i class=\"ion ion-star\"></i> {{ item.rating }}\r\n              </span>\r\n              <span class=\"mr-3 h5\"\r\n                ><i class=\"fa fa-shopping-cart\"></i> {{ item.purchasedCount }}\r\n              </span>\r\n            </p>\r\n          </div>\r\n        </div>\r\n        <br />\r\n      </div>\r\n    </div>\r\n    <div class=\"read-seller\" id=\"freeCode\" routerLink=\"/courses/sort/1\">\r\n      <button class=\"btn\">View more</button>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"container-fluid px-5 my-2\">\r\n    <hr />\r\n    <h1\r\n      class=\"display-4 text-center my-2 wow fadeInDown my-color\"\r\n      style=\"padding: 10px 0px;\"\r\n    >\r\n      <i class=\"fa fa-hand-o-right my-color\"></i>\r\n      Top Free Courses\r\n    </h1>\r\n    <br />\r\n    <div class=\"card-deck wow fadeIn my-color\" data-wow-duration=\"4s\">\r\n      <div class=\"col-3\" *ngFor=\"let item of topFreeCourses\">\r\n        <div class=\"card mb-3\">\r\n          <div class=\"img-zoom\">\r\n            <img\r\n              class=\"card-img-top\"\r\n              style=\"height: 200px; cursor: pointer;\"\r\n              src=\"../../assets/img/{{ item.imgPath }}\"\r\n              alt=\"Card image cap\"\r\n            />\r\n          </div>\r\n          <div class=\"card-body\">\r\n            <h5 class=\"card-title text-center\" style=\"height: 60px;\">\r\n              <a href=\"/course/{{ item._id }}\">{{ item.name }}</a>\r\n            </h5>\r\n            <hr />\r\n            <p class=\"text-sm mb-2\" style=\"height: 40px;\">\r\n              <span class=\"text-muted float-right\">\r\n                <i class=\"ion ion-clock\"></i>\r\n                {{ item.uploadDate | date }}</span\r\n              >\r\n              <small class=\"font-italic\">\r\n                <span class=\"text-muted\">tag</span>\r\n                <span *ngFor=\"let tag of item.tags\"> {{ tag }},</span>\r\n              </small>\r\n            </p>\r\n            <!-- todo: payroll link -->\r\n            <div class=\"border-price my-3\" routerLink=\"/course/{{ item._id }}\">\r\n              <p class=\"h5 text-center text-danger\">\r\n                {{ item.view }}\r\n              </p>\r\n            </div>\r\n            <p class=\"h6 text-center\">\r\n              <span class=\"mr-3 h5\"\r\n                ><i class=\"fa fa-comments-o\"></i> {{ item.reviews.length }}\r\n              </span>\r\n              <span class=\"mr-3 h5\"\r\n                ><i class=\"ion ion-star\"></i> {{ item.rating }}\r\n              </span>\r\n              <span class=\"mr-3 h5\"\r\n                ><i class=\"fa fa-shopping-cart\"></i> {{ item.purchasedCount }}\r\n              </span>\r\n            </p>\r\n          </div>\r\n        </div>\r\n        <br />\r\n      </div>\r\n    </div>\r\n    <div class=\"read-seller\">\r\n      <button class=\"btn\" routerLink=\"/courses/sort/2\">View more</button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<footer class=\"footer\">\r\n  <p>IT-Course by 20A02</p>\r\n</footer>\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-payment',\r\n  templateUrl: './payment.component.html',\r\n  styleUrls: ['./payment.component.scss']\r\n})\r\nexport class PaymentComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<p>payment works!</p>\r\n","import { Component, OnInit, EventEmitter } from '@angular/core';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal';\r\nimport { Promotion } from 'src/model/promotion';\r\nimport { AppService } from 'src/services/app.service';\r\nimport { ToastrService } from 'ngx-toastr';\r\n\r\n@Component({\r\n  selector: 'app-add-promotion-popup',\r\n  templateUrl: './add-promotion-popup.component.html',\r\n  styleUrls: ['./add-promotion-popup.component.scss'],\r\n})\r\nexport class AddPromotionPopupComponent implements OnInit {\r\n  newPromotion: Promotion = new Promotion();\r\n  isSubmit = false;\r\n\r\n  public event: EventEmitter<any> = new EventEmitter();\r\n\r\n  constructor(\r\n    public bsModalRef: BsModalRef,\r\n    private appService: AppService,\r\n    private toastr: ToastrService\r\n  ) {}\r\n\r\n  ngOnInit(): void {}\r\n\r\n  submit() {\r\n    this.isSubmit = true;\r\n    if (\r\n      !this.newPromotion.code ||\r\n      !this.newPromotion.start ||\r\n      !this.newPromotion.end ||\r\n      this.newPromotion.discountPercent == 0 ||\r\n      this.newPromotion.totalAmount == 0\r\n    ) {\r\n      return;\r\n    }\r\n    console.log(this.newPromotion);\r\n    \r\n    this.appService.createPromotionsByAdmin(this.newPromotion).subscribe(\r\n      (res) => {\r\n        this.bsModalRef.hide();\r\n        this.toastr.success('Create Successfully');\r\n        this.triggerEvent(true);\r\n      },\r\n      (err) => {\r\n        this.bsModalRef.hide();\r\n        this.toastr.warning(err.error.message);\r\n      }\r\n    );\r\n  }\r\n\r\n  triggerEvent(item: boolean) {\r\n    this.event.emit({ data: item, res: 200 });\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <div class=\"modal-title\">\r\n    <label class=\"modal-title pull-left h5\">Add Promotion</label>\r\n  </div>\r\n  <button\r\n    type=\"button\"\r\n    class=\"close pull-right\"\r\n    aria-label=\"Close\"\r\n    (click)=\"bsModalRef.hide()\"\r\n  >\r\n    <span aria-hidden=\"true\">&times;</span>\r\n  </button>\r\n</div>\r\n<div class=\"modal-body\">\r\n  <div class=\"container w-75 my-2\">\r\n    <div class=\"row\">\r\n      <div class=\"col\">Code</div>\r\n    </div>\r\n    <div class=\"row\">\r\n      <div class=\"col position-relative\">\r\n        <input [class.error-date]=\"!newPromotion.code && isSubmit\"\r\n          type=\"text\"\r\n          class=\"form-control\"\r\n          [(ngModel)]=\"newPromotion.code\"\r\n        />\r\n        <div *ngIf=\"!newPromotion.code && isSubmit\" class=\"invalid-tooltip\">This field is required</div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"row my-2\">\r\n      <div class=\"col-6\">\r\n        <div class=\"row\">\r\n          <div class=\"col\">Start Date</div>\r\n        </div>\r\n        <div class=\"row\">\r\n          <div class=\"col position-relative\">\r\n            <input [class.error-date]=\"!newPromotion.start && isSubmit\"\r\n              type=\"date\"\r\n              class=\"form-control\"\r\n              [(ngModel)]=\"newPromotion.start\"\r\n              uib-datepicker-popup=\"MM/dd/yyyy\"\r\n            />\r\n            <div *ngIf=\"!newPromotion.start  && isSubmit\" class=\"invalid-tooltip\">This field is required</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-6\">\r\n        <div class=\"row\">\r\n          <div class=\"col\">End Date</div>\r\n        </div>\r\n        <div class=\"row\">\r\n          <div class=\"col position-relative\">\r\n            <input [class.error-date]=\"!newPromotion.end && isSubmit\"\r\n              type=\"date\"\r\n              class=\"form-control\"\r\n              [(ngModel)]=\"newPromotion.end\"\r\n              [min]=\"newPromotion.start\"\r\n            />\r\n            <div *ngIf=\"!newPromotion.end && isSubmit\" class=\"invalid-tooltip\">This field is required</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"row my-2\">\r\n      <div class=\"col-6\">\r\n        <div class=\"row\">\r\n          <div class=\"col\">Discount percentage (%)</div>\r\n        </div>\r\n        <div class=\"row\">\r\n          <div class=\"col position-relative\">\r\n            <input [class.error-date]=\"newPromotion.discountPercent==0 && isSubmit\"\r\n              type=\"number\"\r\n              max=\"100\"\r\n              min=\"0\"\r\n              class=\"form-control\"\r\n              [(ngModel)]=\"newPromotion.discountPercent\"\r\n            />\r\n            <div *ngIf=\"newPromotion.discountPercent==0 && isSubmit\" class=\"invalid-tooltip\">This field is required</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-6\">\r\n        <div class=\"row\">\r\n          <div class=\"col\">Total time</div>\r\n        </div>\r\n        <div class=\"row\">\r\n          <div class=\"col position-relative\">\r\n            <input [class.error-date]=\"newPromotion.totalAmount==0 && isSubmit\"\r\n              type=\"number\"\r\n              min=\"0\"\r\n              class=\"form-control\"\r\n              [(ngModel)]=\"newPromotion.totalAmount\"\r\n            />\r\n            <div *ngIf=\"newPromotion.totalAmount==0 && isSubmit\" class=\"invalid-tooltip\">This field is required</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div class=\"modal-footer\">\r\n  <button type=\"button\" class=\"btn btn-success\" (click)=\"bsModalRef.hide()\">\r\n    Cancel\r\n  </button>\r\n  <button type=\"button\" class=\"btn btn-primary\" (click)=\"submit()\">\r\n    Submit\r\n  </button>\r\n</div>\r\n","import { Component, OnInit, EventEmitter } from '@angular/core';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal';\r\nimport { AuthenticateService } from '../../../services/authen.service';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { Router } from '@angular/router';\r\nimport { Lesson } from '../../../model/lesson';\r\nimport { AppService } from 'src/services/app.service';\r\nimport { Course } from 'src/model/course';\r\ndeclare var $: any;\r\n\r\n@Component({\r\n  selector: 'app-create-course-popup',\r\n  templateUrl: './create-course-popup.component.html',\r\n  styleUrls: ['./create-course-popup.component.scss'],\r\n})\r\nexport class CreateCoursePopupComponent implements OnInit {\r\n  public event: EventEmitter<any> = new EventEmitter();\r\n\r\n  fieldTags: string[] = [];\r\n  tags: string[] = [];\r\n\r\n  fieldLessons: Lesson[] = [];\r\n  lessons: Lesson[] = [];\r\n\r\n  courseTitle = '';\r\n  coursePrice = 0;\r\n  courseDescription = '';\r\n  btnSubmit: string;\r\n  courseId: string;\r\n  title: string;\r\n  course: Course;\r\n\r\n  categories: string[] = [];\r\n\r\n  selectCategory: string;\r\n  constructor(\r\n    public bsModalRef: BsModalRef,\r\n    private appService: AppService,\r\n    private authenticateService: AuthenticateService,\r\n    private toastr: ToastrService,\r\n    private router: Router\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.getAllCategories();\r\n    if (!this.courseId) {\r\n      this.title = 'Create a Course';\r\n      this.btnSubmit = 'Publish Course';\r\n    } else {\r\n      this.title = 'Edit a Course';\r\n      this.btnSubmit = 'Update Course';\r\n\r\n      this.getCourseById(this.courseId);\r\n    }\r\n  }\r\n\r\n  addTag() {\r\n    let itemTag = '';\r\n    this.fieldTags.push(itemTag);\r\n  }\r\n\r\n  addLessons() {\r\n    const itemLesson = new Lesson();\r\n    this.fieldLessons.push(itemLesson);\r\n  }\r\n\r\n  submit() {\r\n    for (let i = 0; i < this.fieldLessons.length; i++) {\r\n      this.lessons[i] = new Lesson();\r\n      this.lessons[i].name = $('#lesson_name_' + i).val();\r\n      this.lessons[i].youtubeCode = $('#lesson_utube_code_' + i).val();\r\n    }\r\n    this.course.lessons = this.lessons;\r\n\r\n    for (let i = 0; i < this.fieldTags.length; i++) {\r\n      this.tags[i] = $('#tag_' + i).val();\r\n    }\r\n    this.course.tags = this.tags;\r\n    this.course.name = this.courseTitle;\r\n    this.course.price = this.coursePrice;\r\n    this.course.description = this.courseDescription;\r\n\r\n    this.appService.updateCourse(this.course).subscribe(\r\n      (res) => {\r\n        this.toastr.success('Updated Successfully!');\r\n      },\r\n      (err) => {\r\n        this.toastr.warning(err.error.message);\r\n      }\r\n    );\r\n    this.bsModalRef.hide();\r\n  }\r\n\r\n  onFileSelected(event) {\r\n    let formData = new FormData();\r\n    formData.append(\r\n      'upload[]',\r\n      event.target.files[0],\r\n      event.target.files[0].name\r\n    );\r\n    this.appService.uploadImage(formData).subscribe(\r\n      (res) => {\r\n        console.log(res);\r\n      },\r\n      (err) => console.log(err)\r\n    );\r\n  }\r\n\r\n  getCourseById(courseId: string) {\r\n    this.appService.getCourseById(courseId).subscribe(\r\n      (res: any) => {\r\n        this.course = res;\r\n        this.course.tags.forEach((element) => {\r\n          this.fieldTags.push(element);\r\n        });\r\n        this.course.lessons.forEach((element) => {\r\n          this.fieldLessons.push(element);\r\n        });\r\n        this.courseDescription = this.course.description;\r\n        this.coursePrice = this.course.price;\r\n        this.courseTitle = this.course.name;\r\n        this.selectCategory = this.course.categoryId;\r\n        console.log(this.course);\r\n      },\r\n      (err) => this.toastr.warning(err.error.message)\r\n    );\r\n  }\r\n\r\n  getAllCategories() {\r\n    this.appService.getAllCategories().subscribe(\r\n      (res: any) => {\r\n        this.categories = res;\r\n      },\r\n      (err) => {\r\n        this.toastr.warning(err.error.message);\r\n      }\r\n    );\r\n  }\r\n\r\n  deletedTag(i) {\r\n    this.fieldTags.splice(i, 1);\r\n  }\r\n\r\n  deleteLesson(i) {\r\n    this.fieldLessons.splice(i, 1);\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <div class=\"modal-title\">\r\n    <label class=\"modal-title pull-left h5\">{{ title }}</label>\r\n  </div>\r\n  <button\r\n    type=\"button\"\r\n    class=\"close pull-right\"\r\n    aria-label=\"Close\"\r\n    (click)=\"bsModalRef.hide()\"\r\n  >\r\n    <span aria-hidden=\"true\">&times;</span>\r\n  </button>\r\n</div>\r\n<div class=\"modal-body\">\r\n  <div class=\"container-fluid my-2\">\r\n    <div class=\"row justify-content-center\">\r\n      <div class=\"col-12\">\r\n        <div class=\"card\">\r\n          <img\r\n            *ngIf=\"course\"\r\n            class=\"card-img-top\"\r\n            style=\"max-height: 450px;\"\r\n            src=\"../../assets/img/{{ course.imgPath }}\"\r\n            alt=\"Card image cap\"\r\n          />\r\n          <div class=\"upload-recipe-img\" *ngIf=\"!course\">\r\n            <div class=\"row justify-content-center\">\r\n              <div class=\"col-12\">\r\n                <input\r\n                  type=\"file\"\r\n                  id=\"file\"\r\n                  (change)=\"onFileSelected($event)\"\r\n                />\r\n                <p class=\"text-center\">\r\n                  <span class=\"h2\"><i class=\"ion ion-camera\"></i></span>\r\n                  <br />\r\n                  Click to upload image\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <hr />\r\n          <div class=\"card-body\">\r\n            <div class=\"form-group row\">\r\n              <div class=\"col-sm-8\">\r\n                <input\r\n                  type=\"text\"\r\n                  [(ngModel)]=\"courseTitle\"\r\n                  class=\"form-control\"\r\n                  placeholder=\"Course title ...\"\r\n                />\r\n              </div>\r\n              <div class=\"col-sm-4\">\r\n                <input\r\n                  type=\"number\"\r\n                  [(ngModel)]=\"coursePrice\"\r\n                  min=\"0\"\r\n                  class=\"form-control\"\r\n                  placeholder=\"Price ...\"\r\n                />\r\n              </div>\r\n            </div>\r\n            <textarea\r\n              [(ngModel)]=\"courseDescription\"\r\n              placeholder=\"Tell the world about your course ...\"\r\n              cols=\"3\"\r\n              rows=\"5\"\r\n              class=\"form-control\"\r\n            ></textarea>\r\n            <hr />\r\n            <div class=\"col\">\r\n              <div class=\"row\">\r\n                <div class=\"col-auto\" style=\"padding-left: 0px \">\r\n                  <h3 class=\"text-muted\">\r\n                    <span>Category</span>\r\n                  </h3>\r\n                </div>\r\n                <div class=\"col\">\r\n                  <select [(ngModel)]=\"selectCategory\" class=\"form-control\" disabled>\r\n                    <option\r\n                      [value]=\"item._id\"\r\n                      *ngFor=\"let item of categories\"\r\n                      >{{ item.name }}</option\r\n                    >\r\n                  </select>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <hr />\r\n            <h3 class=\"text-muted mb-3 mt-3\">\r\n              <span class=\"mr-2\">Tags</span>\r\n              <span class=\"text-muted h4\" (click)=\"addTag()\">\r\n                <i class=\"ion ion-plus\"></i>\r\n              </span>\r\n            </h3>\r\n            <ul class=\"list-group\">\r\n              <li\r\n                class=\"list-group-item\"\r\n                *ngFor=\"let tag of fieldTags; index as i\"\r\n              >\r\n                <div class=\"row\">\r\n                  <div class=\"col-1 h3\">\r\n                    <span class=\"badge badge-primary\">{{ i + 1 }}</span>\r\n                  </div>\r\n                  <div class=\"col-10\">\r\n                    <input\r\n                      id=\"tag_{{ i }}\"\r\n                      [ngModel]=\"tag\"\r\n                      type=\"text\"\r\n                      class=\"form-control\"\r\n                    />\r\n                  </div>\r\n                  <div class=\"col-1 my-1\" style=\"cursor: pointer;\" (click)=\"deletedTag(i)\">\r\n                    <span class=\"text-muted h4\">\r\n                      <i class=\"fa fa-minus text-danger\"></i>\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </li>\r\n            </ul>\r\n            <hr />\r\n            <h3 class=\"text-muted mb-3 mt-3\">\r\n              <span class=\"mr-2\">Lessons</span>\r\n              <span class=\"text-muted h4\" (click)=\"addLessons()\">\r\n                <i class=\"ion ion-plus\"></i>\r\n              </span>\r\n            </h3>\r\n            <ul class=\"list-group\">\r\n              <li\r\n                class=\"list-group-item\"\r\n                *ngFor=\"let lesson of fieldLessons; index as i\"\r\n              >\r\n                <div class=\"row\">\r\n                  <div class=\"col-1 h3\">\r\n                    <span class=\"badge badge-primary\">{{ i + 1 }}</span>\r\n                  </div>\r\n                  <div class=\"col-7\">\r\n                    <input\r\n                      id=\"lesson_name_{{ i }}\"\r\n                      [ngModel]=\"lesson.name\"\r\n                      type=\"text\"\r\n                      class=\"form-control\"\r\n                      placeholder=\"Name ...\"\r\n                    />\r\n                  </div>\r\n                  <div class=\"col-3\">\r\n                    <input\r\n                      id=\"lesson_utube_code_{{ i }}\"\r\n                      [ngModel]=\"lesson.youtubeCode\"\r\n                      type=\"text\"\r\n                      class=\"form-control\"\r\n                      placeholder=\"Youtube Code ...\"\r\n                    />\r\n                  </div>\r\n                  <div class=\"col-1 my-1\" style=\"cursor: pointer;\" (click)=\"deleteLesson(i)\">\r\n                    <span class=\"text-muted h4\">\r\n                      <i class=\"fa fa-minus text-danger\"></i>\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div class=\"modal-footer\">\r\n  <button type=\"button\" class=\"btn btn-success\" (click)=\"bsModalRef.hide()\">Cancel</button>\r\n  <button type=\"button\" class=\"btn btn-primary\" (click)=\"submit()\">\r\n    {{ btnSubmit }}\r\n  </button>\r\n</div>\r\n","import { Component, OnInit, EventEmitter } from '@angular/core';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal';\r\nimport { User } from '../../../model/user';\r\nimport { AuthenticateService } from '../../../services/authen.service';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-login-popup',\r\n  templateUrl: './login-popup.component.html',\r\n  styleUrls: ['./login-popup.component.scss'],\r\n})\r\nexport class LoginPopupComponent implements OnInit {\r\n  routing: string;\r\n\r\n  email: string;\r\n  password: string;\r\n\r\n  errorMessage: string;\r\n  isErrorLogin = false;\r\n  public event: EventEmitter<any> = new EventEmitter();\r\n\r\n  constructor(\r\n    public bsModalRef: BsModalRef,\r\n    private authenticateService: AuthenticateService,\r\n    private toastr: ToastrService,\r\n    private router: Router\r\n  ) {}\r\n\r\n  ngOnInit(): void {}\r\n  login() {\r\n    if (\r\n      this.email == null ||\r\n      this.email === '' ||\r\n      this.password == null ||\r\n      this.password === ''\r\n    ) {\r\n      this.email = '';\r\n      this.password = '';\r\n      return;\r\n    }\r\n\r\n    this.authenticateService.login(this.email, this.password).subscribe(\r\n      (res: any) => {\r\n        this.isErrorLogin = false;\r\n        this.triggerEvent(true);\r\n        this.bsModalRef.hide();\r\n        this.toastr.success('Login successfully!');\r\n      },\r\n      (err) => {\r\n        if (err.status === 401) {\r\n          this.errorMessage = err.error.message;\r\n          this.isErrorLogin = true;\r\n        }\r\n      }\r\n    );\r\n  }\r\n  triggerEvent(item: boolean) {\r\n    this.event.emit({ data: item, res: 200 });\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <p class=\"modal-title pull-left h1\">Login</p>\r\n  <button type=\"button\" class=\"close pull-right\" aria-label=\"Close\" (click)=\"bsModalRef.hide()\">\r\n    <span aria-hidden=\"true\">&times;</span>\r\n  </button>\r\n</div>\r\n<div class=\"modal-body content w-75 mx-auto my-3\">\r\n  <div class=\"row my-4\">\r\n    <div class=\"col-4 mx-auto py-1\">Email:</div>\r\n    <div class=\"col mx-auto position-relative\">\r\n      <input [class.error-field]=\"email==''\" class=\"form-control\" [(ngModel)]=\"email\" />\r\n      <div *ngIf=\"email==''\" class=\"invalid-tooltip\">This fill is required.</div>\r\n\r\n    </div>\r\n  </div>\r\n  <div class=\"row my-4\">\r\n    <div class=\"col-4 mx-auto py-1\">password:</div>\r\n    <div class=\"col mx-auto position-relative\">\r\n      <input [class.error-field]=\"password==''\" type=\"password\" class=\"form-control\"\r\n        [(ngModel)]=\"password\" />\r\n      <div *ngIf=\"password==''\" class=\"invalid-tooltip\">This fill is required.</div>\r\n    </div>\r\n  </div>\r\n  <div class=\"row font-italic text-primary my-4\">\r\n    <a href style=\"margin-left: 16px;\">Forgot password?</a>\r\n  </div>\r\n  <div *ngIf=\"isErrorLogin\" class=\"text-danger font-italic\">{{errorMessage}}</div>\r\n\r\n</div>\r\n<div class=\"modal-footer\">\r\n  <button type=\"button\" class=\"btn btn-style mx-auto\" (click)=\"login()\">Login</button>\r\n  <button type=\"button\" class=\"btn btn-style mx-auto\" (click)=\"bsModalRef.hide()\">\r\n    Cancel\r\n  </button>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal';\r\nimport { User } from 'src/model/user';\r\nimport { AppService } from 'src/services/app.service';\r\nimport { Course } from 'src/model/course';\r\nimport { ToastrService } from 'ngx-toastr';\r\n\r\n@Component({\r\n  selector: 'app-profile-user-popup',\r\n  templateUrl: './profile-user-popup.component.html',\r\n  styleUrls: ['./profile-user-popup.component.scss'],\r\n})\r\nexport class ProfileUserPopupComponent implements OnInit {\r\n  userId: string;\r\n\r\n  user: User = new User();\r\n  lsCourses: Course[] = [];\r\n\r\n  loading = true;\r\n  constructor(\r\n    public bsModalRef: BsModalRef,\r\n    private appService: AppService,\r\n    private toastr: ToastrService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    if (this.userId !== undefined) {\r\n      this.appService.getUserById(this.userId).subscribe(\r\n        (res) => {\r\n          this.user = res;\r\n          this.user.purchasedCourseIds.forEach((element) => {\r\n            this.getPurchasesCourses(element);\r\n          });\r\n        },\r\n        (err) => {}\r\n      );\r\n    }\r\n  }\r\n\r\n  getPurchasesCourses(courseId) {\r\n    this.appService.getCourseById(courseId).subscribe(\r\n      (res: any) => {\r\n        this.loading = false;\r\n        this.lsCourses.push(res);\r\n      },\r\n      (err) => this.toastr.warning(err.error.message)\r\n    );\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <div class=\"modal-title\">\r\n    <label class=\"modal-title pull-left h5\">Profile</label>\r\n  </div>\r\n  <button type=\"button\" class=\"close pull-right\" aria-label=\"Close\"  (click)=\"bsModalRef.hide()\">\r\n    <span aria-hidden=\"true\">&times;</span>\r\n  </button>\r\n</div>\r\n<div class=\"modal-body\" *ngIf=\"user\">\r\n  <div class=\"container-fluid my-2\">\r\n    <div class=\"row\">\r\n      <div class=\"col-4 text-muted\">Fullname:</div>\r\n      <div class=\"col-8 font-italic\">{{ user.name }}</div>\r\n    </div>\r\n    <div class=\"row\">\r\n      <div class=\"col-4 text-muted\">Email:</div>\r\n      <div class=\"col-8 font-italic\">{{ user.email }}</div>\r\n    </div>\r\n    <div class=\"row\">\r\n      <div class=\"col-4 text-muted\">Total Purchased Course:</div>\r\n      <div class=\"col-8 font-italic\">{{ user.purchasedCourseIds.length }}</div>\r\n    </div>\r\n    <div class=\"row\">\r\n      <div class=\"col-4 text-muted\">Total Spent:</div>\r\n      <div class=\"col-8 font-italic\">{{ user.totalSpend }} VND</div>\r\n    </div>\r\n    <div class=\"row\">\r\n      <div class=\"col-4 text-muted\">User's Tags:</div>\r\n      <div class=\"col-8 font-italic\">\r\n        <span *ngFor=\"let tag of user.tags\">{{ tag }}, </span>\r\n      </div>\r\n    </div>\r\n    <hr />\r\n    <div class=\"row w-100\" *ngIf=\"loading\">\r\n      <div class=\"lds-roller col-auto mx-auto\">\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n        <div></div>\r\n      </div>\r\n    </div>\r\n    <div class=\"row\" *ngIf=\"!loading\">\r\n      <div class=\"col-12\">\r\n        <div class=\"table-responsive table-hover\">\r\n          <table class=\"table table-striped\">\r\n            <thead class=\"thead-dark\">\r\n              <tr>\r\n                <th scope=\"col\">#</th>\r\n                <th scope=\"col\">Course Name</th>\r\n                <th scope=\"col\">Tags</th>\r\n                <th scope=\"col\">Upload Date</th>\r\n                <th scope=\"col\">Price(VND)</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr\r\n                *ngFor=\"let course of lsCourses; index as i\"\r\n                style=\"cursor: pointer;\"\r\n              >\r\n                <th scope=\"row\">{{ i + 1 }}</th>\r\n                <td>{{ course.name }}</td>\r\n                <td>\r\n                  <span *ngFor=\"let tag of course.tags\">{{ tag }}, </span>\r\n                </td>\r\n                <td>{{ course.uploadDate | date: \"MMM d, y, h:mm:ss a\" }}</td>\r\n                <td>{{ course.price }}</td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div class=\"modal-footer\">\r\n  <button type=\"button\" class=\"btn btn-success\" (click)=\"bsModalRef.hide()\">Cancel</button>\r\n</div>\r\n","import { Component, OnInit, EventEmitter } from '@angular/core';\r\nimport { BsModalRef } from 'ngx-bootstrap/modal';\r\nimport { AuthenticateService } from '../../../services/authen.service';\r\nimport { ToastrService } from 'ngx-toastr';\r\n\r\n@Component({\r\n  selector: 'app-register-popup',\r\n  templateUrl: './register-popup.component.html',\r\n  styleUrls: ['./register-popup.component.scss'],\r\n})\r\nexport class RegisterPopupComponent implements OnInit {\r\n  username: string;\r\n  email: string;\r\n  password: string;\r\n  confirmPassword: string;\r\n  isConfirm = true;\r\n  errorMessage: string;\r\n  public event: EventEmitter<any> = new EventEmitter();\r\n\r\n  constructor(\r\n    public bsModalRef: BsModalRef,\r\n    private authenticateService: AuthenticateService,\r\n    private toastr: ToastrService\r\n  ) {}\r\n\r\n  ngOnInit(): void {}\r\n\r\n  registerUser() {\r\n    if (\r\n      this.username == null ||\r\n      this.username === '' ||\r\n      this.email == null ||\r\n      this.email === '' ||\r\n      this.password == null ||\r\n      this.password === '' ||\r\n      this.confirmPassword == null ||\r\n      this.confirmPassword === ''\r\n    ) {\r\n      return;\r\n    }\r\n    if (this.password !== this.confirmPassword) {\r\n      this.isConfirm = false;\r\n      return;\r\n    }\r\n    this.isConfirm = true;\r\n    this.authenticateService\r\n      .registerUser(this.username, this.email, this.password)\r\n      .subscribe(\r\n        (res: any) => {\r\n          this.triggerEvent(true);\r\n          this.errorMessage = null;\r\n          this.bsModalRef.hide();\r\n        },\r\n        (err) => {\r\n          if (err.status === 409) {\r\n            this.errorMessage = err.error.message;\r\n          }\r\n        }\r\n      );\r\n  }\r\n\r\n  triggerEvent(item: boolean) {\r\n    this.event.emit({ data: item, res: 200 });\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <p class=\"modal-title pull-left h1\">Register Account</p>\r\n  <button type=\"button\" class=\"close pull-right\" aria-label=\"Close\" (click)=\"bsModalRef.hide()\">\r\n    <span aria-hidden=\"true\">&times;</span>\r\n  </button>\r\n</div>\r\n<div class=\"modal-body content w-75 mx-auto my-3\">\r\n  <div class=\"row my-3\">\r\n    <div class=\"col-4 mx-auto py-1\">Username:</div>\r\n    <div class=\"col mx-auto position-relative\">\r\n      <input [class.error-field]=\"password==''\" class=\"form-control\" [(ngModel)]=\"username\" />\r\n      <div *ngIf=\"username==''\" class=\"invalid-tooltip\">This fill is required.</div>\r\n    </div>\r\n  </div>\r\n  <div class=\"row my-3\">\r\n    <div class=\"col-4 mx-auto py-1\">Email:</div>\r\n    <div class=\"col mx-auto position-relative\">\r\n      <input [class.error-field]=\"email==''\" class=\"form-control\" [(ngModel)]=\"email\" />\r\n      <div *ngIf=\"email==''\" class=\"invalid-tooltip\">This fill is required.</div>\r\n    </div>\r\n  </div>\r\n  <div class=\"row my-3\">\r\n    <div class=\"col-4 mx-auto py-1\">Password:</div>\r\n    <div class=\"col mx-auto position-relative\">\r\n      <input [class.error-field]=\"password==''\" type=\"password\" class=\"form-control\" [(ngModel)]=\"password\" />\r\n      <div *ngIf=\"password==''\" class=\"invalid-tooltip\">This fill is required.</div>\r\n    </div>\r\n  </div>\r\n  <div class=\"row my-3\">\r\n    <div class=\"col-4 mx-auto py-1\">Confirm:</div>\r\n    <div class=\"col mx-auto position-relative\">\r\n      <input [class.error-field]=\"confirmPassword=='' || !isConfirm\" type=\"password\"\r\n        class=\"form-control\" [(ngModel)]=\"confirmPassword\" />\r\n      <div *ngIf=\"confirmPassword==''\" class=\"invalid-tooltip\">This fill is required.</div>\r\n      <div *ngIf=\"!isConfirm\" class=\"invalid-tooltip\">Wrong.</div>\r\n    </div>\r\n    <div class=\"row\">\r\n      <div class=\"col-auto text-danger font-italic\" *ngIf=\"errorMessage\">{{errorMessage}}</div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div class=\"modal-footer\">\r\n  <button type=\"button\" class=\"btn btn-style mx-auto\" (click)=\"registerUser()\">Register</button>\r\n  <button type=\"button\" class=\"btn btn-style mx-auto\" (click)=\"bsModalRef.hide()\">\r\n    Cancel\r\n  </button>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { LsHelper } from '../helper/ls.helper';\r\nimport { User } from '../../model/user';\r\nimport { AppService } from '../../services/app.service';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { Course } from 'src/model/course';\r\n\r\n@Component({\r\n  selector: 'app-profile',\r\n  templateUrl: './profile.component.html',\r\n  styleUrls: ['./profile.component.scss'],\r\n})\r\nexport class ProfileComponent implements OnInit {\r\n  userId: string;\r\n  user: User;\r\n  lsCourses: Course[] = [];\r\n  constructor(\r\n    private appService: AppService,\r\n    private activatedRoute: ActivatedRoute,\r\n    private toastr: ToastrService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.user = LsHelper.getUserFromStorage();\r\n\r\n    this.getUserLogin(this.user._id);\r\n  }\r\n  getUserLogin(userId) {\r\n    this.appService.getUserById(userId).subscribe(\r\n      (res) => {\r\n        this.user = res;\r\n        this.user.purchasedCourseIds.forEach(element => {\r\n          this.getPurchasesCourses(element);\r\n        });\r\n      },\r\n      (err) => {\r\n        console.log(err.error.message);\r\n      }\r\n    );\r\n  }\r\n\r\n  getPurchasesCourses(courseId) {\r\n    this.appService.getCourseById(courseId).subscribe(\r\n      (res: any) => {\r\n        this.lsCourses.push(res);\r\n      },\r\n      (err) => this.toastr.warning(err.error.message)\r\n    );\r\n  }\r\n}\r\n","<div class=\"container my-5\" *ngIf=\"user\">\r\n  <div class=\"row\">\r\n    <div class=\"col-lg-12 col-md-8\">\r\n      <div style=\"text-align: center;\">\r\n        <img\r\n          style=\"\r\n            width: 200px;\r\n            height: 200px;\r\n            border-radius: 100%;\r\n            text-align: center;\r\n          \"\r\n          src=\"http://i.pravatar.cc/500\"\r\n          alt=\"Recipe author avatar\"\r\n        />\r\n      </div>\r\n      <div class=\"col-12 text-center\">\r\n        <h1 class=\"header-color my-color\">Name: {{ user.name }}</h1>\r\n        <h3 class=\"header-color my-color\">Email: {{ user.email }}</h3>\r\n      </div>\r\n      <p class=\"text-center my-4\">\r\n        <span class=\"h6 mr-3\">Purchased Courses: </span>\r\n        <span class=\"mr-3 h2 header-color my-color\">\r\n          {{ user.purchasedCourseIds.length }}\r\n        </span>\r\n      </p>\r\n      <p class=\"text-center my-4\">\r\n        <span class=\"h6 mr-3\">Total Spent: </span>\r\n        <span class=\"mr-3 h2 header-color my-color\">\r\n          {{ user.totalSpend }} VND\r\n        </span>\r\n      </p>\r\n    </div>\r\n  </div>\r\n  <hr />\r\n  <h1 class=\"text-center my-5 display-4 my-color font-weight-bold\">\r\n    Your Course\r\n  </h1>\r\n  <div class=\"row\">\r\n    <div class=\"col-4\" *ngFor=\"let item of lsCourses\">\r\n      <div class=\"card mb-3\">\r\n        <div class=\"img-zoom\">\r\n          <img\r\n            routerLink=\"/course/{{ item._id }}\"\r\n            class=\"card-img-top\"\r\n            style=\"height: 220px; cursor: pointer;\"\r\n            src=\"../../assets/img/{{ item.imgPath }}\"\r\n            alt=\"Card image cap\"\r\n          />\r\n        </div>\r\n        <div class=\"card-body\">\r\n          <h5 class=\"card-title text-center\" style=\"height: 60px;\">\r\n            <a href=\"/course/{{ item._id }}\">{{ item.name }}</a>\r\n          </h5>\r\n          <hr />\r\n          <p class=\"text-sm mb-2\" style=\"height: 40px;\">\r\n            <span class=\"text-muted float-right\">\r\n              <i class=\"ion ion-clock\"></i>\r\n              {{ item.uploadDate | date }}\r\n            </span>\r\n            <small class=\"font-italic\">\r\n              <span class=\"text-muted\">tag</span>\r\n              <span *ngFor=\"let tag of item.tags\"> {{ tag }},</span>\r\n            </small>\r\n          </p>\r\n          <div\r\n            style=\"cursor: pointer;\"\r\n            class=\"border-price my-3\"\r\n            routerLink=\"/course/{{ item._id }}\"\r\n          >\r\n            <p class=\"h5 text-center text-danger\">\r\n              {{ item.view }}\r\n            </p>\r\n          </div>\r\n          <p class=\"h6 text-center\">\r\n            <span class=\"mr-3 h5\"\r\n              ><i class=\"fa fa-comments-o\"></i> {{ item.reviews.length }}\r\n            </span>\r\n            <span class=\"mr-3 h5\"\r\n              ><i class=\"ion ion-star\"></i> {{ item.rating }}\r\n            </span>\r\n            <span class=\"mr-3 h5\"\r\n              ><i class=\"fa fa-shopping-cart\"></i> {{ item.purchasedCount }}\r\n            </span>\r\n          </p>\r\n        </div>\r\n      </div>\r\n      <br />\r\n    </div>\r\n  </div>\r\n</div>\r\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false\r\n};\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n","import { Course } from './course';\r\nimport { ItemCart } from './item-cart';\r\nexport class Cart {\r\n  _id: string;\r\n  userId: string;\r\n  isCurrent: boolean;\r\n  promotionCode: string;\r\n  isPaid: boolean;\r\n  items: ItemCart[];\r\n  paymentMethod: string;\r\n  paidDate: Date;\r\n  total: number;\r\n  totalAfterPromoted: number;\r\n}\r\n","export class Lesson{\r\n    youtubeCode: string;\r\n    name: string;\r\n}","import { Course } from './course';\r\n\r\nexport class PersonalCourses{\r\n    course: Course;\r\n    countSimilar: number = 0;\r\n    countRecommend: number = 0;\r\n}","export class Promotion {\r\n  _id: string;\r\n  code: string;\r\n  start: Date;\r\n  end: Date;\r\n  discountPercent: number=0;\r\n  status: string;\r\n  totalAmount: number=0;\r\n  usedCount: number;\r\n  userClass: number;\r\n}","export class User {\r\n  _id: string;\r\n  name: string;\r\n  email: string;\r\n  isAdmin: boolean;\r\n  purchasedCourseIds: string[] = [];\r\n  tags: string[];\r\n  exp: number;\r\n  totalSpend: number;\r\n}\r\n","import { Injectable, OnInit } from '@angular/core';\r\nimport { HttpClient, HttpParams, HttpHeaders } from '@angular/common/http';\r\nimport { map } from 'rxjs/operators';\r\nimport { Observable } from 'rxjs';\r\nimport { LsHelper } from '../app/helper/ls.helper';\r\nimport { Course } from 'src/model/course';\r\nimport { Promotion } from 'src/model/promotion';\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class AppService {\r\n  apiUrl = 'api/';\r\n  httpOptions: any;\r\n  constructor(private http: HttpClient) {\r\n    this.httpOptions = {\r\n      headers: new HttpHeaders({\r\n        Authorization: 'Bearer ' + LsHelper.getToken(),\r\n      }),\r\n    };\r\n  }\r\n\r\n  getAllCategories(): Observable<any> {\r\n    return this.http\r\n      .get(this.apiUrl + 'categories')\r\n      .pipe(map((res: any) => res));\r\n  }\r\n\r\n  getAllCourses(): Observable<any> {\r\n    return this.http\r\n      .get(this.apiUrl + 'courses', this.httpOptions)\r\n      .pipe(map((res: any) => res));\r\n  }\r\n\r\n  getCoursesByCategoryId(categoryId: string): Observable<any> {\r\n    return this.http\r\n      .get(\r\n        this.apiUrl + 'category/' + categoryId + '/courses',\r\n        this.httpOptions\r\n      )\r\n      .pipe(map((res: any) => res));\r\n  }\r\n\r\n  getCourseById(id: any): Observable<any> {\r\n    return this.http\r\n      .get(this.apiUrl + 'course/' + id, this.httpOptions)\r\n      .pipe(map((res: any) => res));\r\n  }\r\n\r\n  getCourseByIdNoneUser(id: any): Observable<any> {\r\n    return this.http\r\n      .get(this.apiUrl + 'guest/course/' + id, this.httpOptions)\r\n      .pipe(map((res: any) => res));\r\n  }\r\n\r\n  getCategoryById(categoryId: any): Observable<any> {\r\n    return this.http\r\n      .get(this.apiUrl + 'category/' + categoryId)\r\n      .pipe(map((res) => res));\r\n  }\r\n\r\n  getUserById(id: string): Observable<any> {\r\n    return this.http\r\n      .get(this.apiUrl + 'user/' + id, this.httpOptions)\r\n      .pipe(map((res: any) => res));\r\n  }\r\n\r\n  addReview(review: any, courseId): Observable<any> {\r\n    return this.http\r\n      .post(\r\n        this.apiUrl + 'course/' + courseId + '/reviews',\r\n        review,\r\n        this.httpOptions\r\n      )\r\n      .pipe(map((res: any) => res));\r\n  }\r\n\r\n  getCartByUser(): Observable<any> {\r\n    return this.http\r\n      .get(this.apiUrl + 'cart', this.httpOptions)\r\n      .pipe(map((res: any) => res));\r\n  }\r\n\r\n  getCurrencyConverted(amount: any): Observable<any> {\r\n    const body = {\r\n      fromCurrency: 'VND',\r\n      toCurrency: 'USD',\r\n      amount: amount,\r\n    };\r\n\r\n    return this.http\r\n      .post(this.apiUrl + 'currency', body, this.httpOptions)\r\n      .pipe(map((res: any) => res));\r\n  }\r\n\r\n  addCourseToCart(courseId: string): Observable<any> {\r\n    const body = {\r\n      courseId,\r\n    };\r\n    return this.http\r\n      .post(this.apiUrl + 'cart/items', body, this.httpOptions)\r\n      .pipe(map((res: any) => res));\r\n  }\r\n\r\n  paidCourses(paymentMethod: string): Observable<any> {\r\n    const body = {\r\n      paymentMethod: paymentMethod,\r\n    };\r\n    return this.http\r\n      .post(this.apiUrl + 'pay', body, this.httpOptions)\r\n      .pipe(map((res: any) => res));\r\n  }\r\n\r\n  removeCourseToCart(courseId: string): Observable<any> {\r\n    return this.http\r\n      .put(this.apiUrl + 'cart/items', courseId, this.httpOptions)\r\n      .pipe(map((res: any) => res));\r\n  }\r\n\r\n  getAllCoursesByAdmin(): Observable<any> {\r\n    return this.http\r\n      .get(this.apiUrl + 'admin/courses', this.httpOptions)\r\n      .pipe(map((res: any) => res));\r\n  }\r\n\r\n  deleteCourseByAdmin(courseId): Observable<any> {\r\n    return this.http\r\n      .delete(this.apiUrl + 'course/' + courseId, this.httpOptions)\r\n      .pipe(map((res: any) => res));\r\n  }\r\n\r\n  uploadImage(formData): Observable<any> {\r\n    return this.http\r\n      .post(this.apiUrl + 'uploadimg', formData, this.httpOptions)\r\n      .pipe(map((res: any) => res));\r\n  }\r\n\r\n  getAllUsers(): Observable<any> {\r\n    return this.http\r\n      .get(this.apiUrl + 'admin/users', this.httpOptions)\r\n      .pipe(map((res: any) => res));\r\n  }\r\n\r\n  getRevenueOfYear(reqYear: number): Observable<any> {\r\n    const body = {\r\n      year: reqYear,\r\n    };\r\n    return this.http\r\n      .post(this.apiUrl + 'analytic/revenue', body, this.httpOptions)\r\n      .pipe(map((res: any) => res));\r\n  }\r\n\r\n  getTrendTags(reqYear: number): Observable<any> {\r\n    const body = {\r\n      year: reqYear,\r\n    };\r\n    return this.http\r\n      .post(this.apiUrl + 'analytic/trendtags', body, this.httpOptions)\r\n      .pipe(map((res: any) => res));\r\n  }\r\n\r\n  updateCourse(course: Course): Observable<any> {\r\n    return this.http\r\n      .put(\r\n        this.apiUrl + 'category/' + course.categoryId + '/courses',\r\n        course,\r\n        this.httpOptions\r\n      )\r\n      .pipe(map((res: any) => res));\r\n  }\r\n\r\n  getAllPromotionsByAdmin(): Observable<any> {\r\n    return this.http\r\n      .get(this.apiUrl + 'admin/promotions', this.httpOptions)\r\n      .pipe(map((res: any) => res));\r\n  }\r\n\r\n  addPromotionToCart(promotionCode: string): Observable<any> {\r\n    const body = {\r\n      promotionCode,\r\n    };\r\n    return this.http\r\n      .post(this.apiUrl + 'cart/promotion', body, this.httpOptions)\r\n      .pipe(map((res: any) => res));\r\n  }\r\n\r\n  removePromotionToCart(): Observable<any> {\r\n    return this.http\r\n      .put(this.apiUrl + 'cart/promotion', this.httpOptions)\r\n      .pipe(map((res: any) => res));\r\n  }\r\n\r\n  deleteItemCart(courseId): Observable<any> {\r\n    return this.http\r\n      .put(this.apiUrl + 'cart/items', { courseId }, this.httpOptions)\r\n      .pipe(map((res: any) => res));\r\n  }\r\n\r\n  learnFreeCourse(courseId): Observable<any> {\r\n    return this.http\r\n      .post(this.apiUrl + 'freecourse', { courseId }, this.httpOptions)\r\n      .pipe(map((res: any) => res));\r\n  }\r\n\r\n  createPromotionsByAdmin(promotion: Promotion): Observable<any> {\r\n    return this.http\r\n      .post(this.apiUrl + 'admin/promotions', { promotion }, this.httpOptions)\r\n      .pipe(map((res: any) => res));\r\n  }\r\n\r\n  deletePromotionsByAdmin(code: string): Observable<any> {\r\n    return this.http\r\n      .delete(this.apiUrl + 'admin/promotions/' + code, this.httpOptions)\r\n      .pipe(map((res: any) => res));\r\n  }\r\n\r\n  updateStatusPromotion(code, status): Observable<any> {\r\n    return this.http\r\n      .put(this.apiUrl + 'admin/promotion/setstatus', { code, status }, this.httpOptions)\r\n      .pipe(map((res: any) => res));\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { map } from 'rxjs/operators';\r\nimport { Observable } from 'rxjs';\r\nimport { LsHelper } from '../app/helper/ls.helper';\r\nimport { User } from '../model/user';\r\nimport { catchError } from 'rxjs/operators';\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class AuthenticateService {\r\n  apiUrl = 'api/';\r\n  constructor(private http: HttpClient) {}\r\n\r\n  public login(email: string, password: string): Observable<User> {\r\n    return this.http.post(this.apiUrl + 'login', { email, password }).pipe(\r\n      map((res: User) => {\r\n        LsHelper.saveUserToStorage(res);\r\n        return res;\r\n      })\r\n    );\r\n  }\r\n\r\n\r\n  public registerUser(name, email, password): Observable<boolean> {\r\n    return this.http\r\n      .post(this.apiUrl + 'register', { name, email, password })\r\n      .pipe(map((res: any) => res));\r\n  }\r\n\r\n  public authenticate(): Observable<User> {\r\n    return this.http.get(this.apiUrl + '/Authenticate').pipe(\r\n      map((res: User) => {\r\n        LsHelper.saveUserToStorage(res);\r\n        return res;\r\n      })\r\n    );\r\n  }\r\n}\r\n"]}